state  = c("CA","TX","NY","IL","WA"),
region = c("West","South","Northeast","Midwest","West"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$total_interactions <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$total_interactions >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
tw
# Title: Compare same code in tidyverse and base R
# MACS 30500 Lecture 9, October 29, 2025
# BASE R CODE
# Create data
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","WA", "IL"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","WA"),
region = c("West","South","Northeast","Midwest","West"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$total_interactions <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$total_interactions >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
tw
unique(tw$state)
numeric(length(states))
merge(tw, state_lookup, by = "state", all = FALSE)
# Create data
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","WA", "IL"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep")
stringsAsFactors = FALSE)
# Create data
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","WA", "IL"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$total_interactions <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$total_interactions >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
# bring in second df
tw_merged <- merge(tw, state_lookup, by = "state", all = FALSE)
tw_merged
# Create data
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","WA", "AZ"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$total_interactions <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$total_interactions >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
# bring in second df
tw_merged <- merge(tw, state_lookup, by = "state", all = FALSE)
tw_merged
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
tw_full
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
# compute some stats
total_likes   <- numeric(length(tw_full)
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
# compute some stats
total_likes   <- numeric(length(tw_full))
total_likes
length(tw_full)
tw_full
tw_full
# first, prepare empty vector to store data
output <- vector(mode = "double", length = ncol(tw_full))
# second, run it
for (i in seq_along(tw_full)) {
total_likes[i]   <- sum(tw_full$likes[idx])
mean_retweets[i] <- mean(tw_full$retweets[idx])
}
# first, prepare empty vector to store data
output <- vector(mode = "double", length = ncol(tw_full))
# second, run it
for (i in seq_along(tw_full)) {
total_likes[i]   <- sum(tw_full$likes[i])
mean_retweets[i] <- mean(tw_full$retweets[i])
}
# first, prepare empty vector to store data
total_likes <- vector(mode = "double", length = ncol(tw_full))
mean_retweets <- vector(mode = "double", length = ncol(tw_full))
# second, run it
for (i in seq_along(tw_full)) {
total_likes[i]   <- sum(tw_full$likes[i])
mean_retweets[i] <- mean(tw_full$retweets[i])
}
total_likes
mean_retweets
# Title: Compare same code in tidyverse and base R
# MACS 30500 Lecture 9, October 29, 2025
# BASE R CODE
# create data
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","WA", "AZ"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$total_interactions <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$total_interactions >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
# bring in second df
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
tw_full
mean(tw_full$total_interactions)
library(dplyr)
twitter <- tibble::tibble(
user     = c("alice","bob","carlos","diana","emily","lucia","gina","rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en","en"),
state    = c("CA","TX","TX","NY","IL","CA","WA","AZ")
)
state_lookup <- tibble::tibble(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote   = c("Dem","Rep","Dem","Dem","Rep")
)
twitter %>%
mutate(
total_interactions = likes + retweets,
high_engagement    = total_interactions >= 80
) %>%
filter(language == "en", high_engagement) %>%
inner_join(state_lookup, by = "state") %>%
summarise(avg_total = mean(total_interactions))
# compute mean of one variable
avg_total1 <- mean(tw_full$total_interactions)
avg_total1
tw_full
# create data
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","WA", "AZ"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$total_interactions <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$total_likes_retweets >= 80
# create data
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","WA", "AZ"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$total_likes_retweets <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$total_likes_retweets >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
# bring in second df
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
# compute mean of one variable
avg_inter <- mean(tw_full$total_likes_retweets)
# create two dataframes
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","IL", "AZ"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$total_likes_retweets <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$total_likes_retweets >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
# bring in second df
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
# compute mean of one variable
avg_inter <- mean(tw_full$total_likes_retweets, na.rm = TRUE)
avg_inter
# create two dataframes
twitter <- tibble(
user     = c("alice","bob","carlos","diana","emily","lucia","gina","rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en","en"),
state    = c("CA","TX","TX","NY","IL","CA","IL","AZ")
)
state_lookup <- tibble(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote   = c("Dem","Rep","Dem","Dem","Rep")
)
twitter %>%
mutate(
total_interactions = likes + retweets,
high_engagement    = total_interactions >= 80
) %>%
filter(language == "en" & high_engagement == TRUE) %>%
inner_join(state_lookup, by = "state") %>%
summarise(avg_total = mean(total_interactions, na.rm = TRUE))
# create two dataframes
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","IL", "AZ"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$total_likes_retweets <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$total_likes_retweets >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
# bring in second df
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
# compute mean of one variable
avg_inter <- mean(tw_full$total_likes_retweets, na.rm = TRUE)
# compute mean of one variable
avg_inter_by_region <- tapply(tw_full$total_likes_retweets, tw_full$region, mean)
avg_inter_by_region
avg_inter
tw_full
30+58+60+20
168/4
(88+80)/2
# Title: Compare same code in tidyverse and base R
# MACS 30500 Lecture 9, October 29, 2025
# BASE R CODE
# create two dataframes
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","IL", "AZ"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$total_likes_retweets <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$total_likes_retweets >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
# bring in second df
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
# compute sum of one variable
sum_inter <- sum(tw_full$tot_likes_retweets)
# compute sum of one variable
sum_inter_by_region <- tapply(tw_full$tot_likes_retweets, tw_full$region, sum)
# Title: Compare same code in tidyverse and base R
# MACS 30500 Lecture 9, October 29, 2025
# BASE R CODE
# create two dataframes
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","IL", "AZ"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$tot_likes_retweets <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$tot_likes_retweets >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
# bring in second df
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
# compute sum of one variable
sum_inter <- sum(tw_full$tot_likes_retweets)
# compute sum of one variable
sum_inter_by_region <- tapply(tw_full$tot_likes_retweets, tw_full$region, sum)
sum_inter
sum_inter_by_region
tw_full
# Title: Compare same code in tidyverse and base R
# MACS 30500 Lecture 9, October 29, 2025
# BASE R CODE
# create two dataframes
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","IL", "AZ"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$tot_likes_retweets <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$tot_likes_retweets >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
# bring in second df
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
# compute sum of one variable
sum_inter <- sum(tw_full$tot_likes_retweets)
# compute sum of one variable
sum_inter_by_region <- tapply(tw_full$tot_likes_retweets, tw_full$vote, sum)
sum_inter_by_region
tw_full
mean_inter_by_vote <- tapply(tw_full$total_likes_retweets, tw_full$vote, mean)
mean_inter_by_vote <- tapply(tw_full$tot_likes_retweets, tw_full$vote, mean)
mean_inter_by_vote
tw_full
sum_inter_by_region
# BASE R CODE
# create two dataframes
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","IL", "AZ"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$tot_likes_retweets <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$tot_likes_retweets >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
# bring in second df
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
# compute sum of one variable
sum_inter <- sum(tw_full$tot_likes_retweets)
# compute sum of one variable
sum_inter_by_vote <- tapply(tw_full$tot_likes_retweets, tw_full$vote, sum)
twitter <- data.frame(
user     = c("alice","bob","carlos","diana","emily","lucia","gina", "rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en", "en"),
state    = c("CA","TX","TX","NY","IL","CA","IL", "AZ"),
stringsAsFactors = FALSE)
state_lookup <- data.frame(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote = c("Dem", "Rep", "Dem", "Dem", "Rep"),
stringsAsFactors = FALSE)
# create new variables in twitter df
twitter$tot_likes_retweets <- twitter$likes + twitter$retweets
twitter$high_engagement    <- twitter$tot_likes_retweets >= 80
# create a new df with only rows that match conditions
tw <- twitter[twitter$language == "en" & twitter$high_engagement == TRUE, ]
# bring in second df
tw_full <- merge(tw, state_lookup, by = "state", all = FALSE)
# compute sum of one variable
sum_inter <- sum(tw_full$tot_likes_retweets)
# compute sum of one variable by another
sum_inter_by_vote <- tapply(tw_full$tot_likes_retweets, tw_full$vote, sum)
sum_inter_by_vote
# create two dataframes
twitter <- tibble(
user     = c("alice","bob","carlos","diana","emily","lucia","gina","rick"),
likes    = c(45, 80, 22, 130, 55, 60, 15, 30),
retweets = c(10, 25,  5,  50, 12, 20, 30, 58),
language = c("en","es","en","en","fr","en","en","en"),
state    = c("CA","TX","TX","NY","IL","CA","IL","AZ"))
state_lookup <- tibble(
state  = c("CA","TX","NY","IL","AZ"),
region = c("West","South","Northeast","Midwest","West"),
vote   = c("Dem","Rep","Dem","Dem","Rep"))
tw_full <- twitter |>
mutate(
tot_likes_retweets = likes + retweets,
high_engagement = tot_likes_retweets >= 80) |>
filter(language == "en" & high_engagement == TRUE) |>
inner_join(state_lookup, by = "state")
tw_full
sum_inter <- tw_full |>
summarise(sum_inter = sum(tot_likes_retweets))
sum_inter_by_vote <- tw_full |>
group_by(vote) |>
summarise(sum_inter_by_vote = sum(tot_likes_retweets))
sum_inter_by_vote
df <- data.frame(
name = c("Alex", "Betty", "Chad", "J"),
age = c(20, 21, 22, 23))
df[1, ]            # first row (all columns)
df[ , 1]           # first column by index
df[ , "name"]      # first column by label
df$name            # same as above
df[["name"]]       # same as above
df[1, 2]           # single value at row 1, column 2
df[2:3, "name"]    # values in rows 2 and 3 of column name
df[df$age > 20, ]            # filter rows where age > 20
df[df$name == "J", ]         # filter rows where name is "J"
df[df$age == max(df$age), ]  # filter rows with highest age
```r
my_list <- list(
a = c(20, 30, 40),
b = c("hello", "ciao"),
c = TRUE)
my_list[1]         # list with one element
my_list[[1]]       # content of first element: 20, 30, 40,
my_list[[1]][1]    # first value of the first eleement: 20
my_list["b"]       # list with one element named "b"
my_list$b          # same as my_list[["b"]], only works with names
my_list[["c"]]     # returns TRUE
my_list <- list(
a = c(20, 30, 40),
b = c("hello", "ciao"),
c = TRUE)
my_list[1]         # first element of my_list, by positipn
my_list[[1]]       # content of the first element: 20, 30, 40
my_list[[1]][1]    # first value of the first element: 20
my_list[2]         # second element of my_list, by position
my_list["b"]       # second element of my_list, by name
my_list$b          # same as my_list[["b"]], only works by name not by position
my_list[["c"]]     # returns content of "c" TRUE
my_list["b"]
class(my_list["b"])
class(my_list$b)
my_list$b
my_list$2
my_list["b"][2]
my_list["b"][1]
my_list <- list(
a = c(20, 30, 40),
b = c("hello", "ciao"),
c = TRUE)
my_list[[1]][1]
my_list[1][[1]]
my_list[1][[1]][1]
my_list[[1]][1]
my_list[["c"]]     # returns content of "c": TRUE
my_list["b"][1]
my_list["b"]
my_list[["b"]][1]
my_list[["b"]][2]
my_list[[2]][1]
`my_list[["b"]][3]`
class(my_list[1])
class(my_list[[1]])
my_list[[1]]
my_list[1]
git status
