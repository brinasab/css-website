gpa = c(3.5, 3.8, 3.2, 3.6, 3.9, 3.7, 3.8, 2.3)
)
students |>
group_by(major) |>
summarize(avg_gpa = mean(gpa, na.rm = TRUE)) |>
arrange(desc(avg_gpa))
students |>
summarize(avg_gpa = mean(gpa, na.rm = TRUE)) |>
arrange(desc(avg_gpa))
students |>
select(major) |>
summarize(avg_gpa = mean(gpa, na.rm = TRUE)) |>
arrange(desc(avg_gpa))
students |>
group_by(major) |>
mutate(avg_gpa = mean(gpa, na.rm = TRUE)) |>
arrange(desc(avg_gp
students |>
group_by(major) |>
mutate(avg_gpa = mean(gpa, na.rm = TRUE)) |>
arrange(desc(avg_gpa))
students |>Â 
students |>
group_by(major) |>
mutate(avg_gpa = mean(gpa, na.rm = TRUE)) |>
arrange(desc(avg_gpa))
health <- tibble(
disease = c(
"Chicago Flu 2020",
"New York Cold 2021",
"Austin Measles 2020",
"Chicago Flu 2020",
"Seattle Pox 2022"
),
cases = c(120, 85, 40, 95, 60),
state = c("IL", "NY", "TX", "IL", "WA")
)
health_filtered <- health %>%
filter(disease != "Chicago Flu 2020")
health_filtered
health %>% filter(disease != "Chicago Flu 2020")
# Example dataset
health <- tibble(
disease = c(
"Chicago Flu 2020",
"New York Cold 2021",
"Austin Measles 2020",
"Chicago Flu 2020",
"Seattle Pox 2022"
),
cases = c(120, 85, 40, 95, 60),
state = c("IL", "NY", "TX", "IL", "WA")
)
health %>% filter(disease != "Chicago Flu 2020")
# load required packages
library(tidyverse)
library(rcis)
# 1. TIDY THE `RACE ` DATA
# check
race
library(tidyr)
df <- tibble(
id = 1:3,
height = c(150, 160, 170),
weight = c(50, 55, 60))
df
df2 <- pivot_longer(
df,
cols = c(height, weight),
names_to = "measure",
values_to = "score")
df2
df <- tibble(
id = 1:3,
height = c(150, 160, 170),
weight = c(50, 55, 60)
)
df
library(tibble)
df <- tibble(
id = rep(1:3, each = 2),
measure = rep(c("height", "weight"), times = 3),
score = c(150, 50, 160, 55, 170, 60)
)
df
pivot_wider(
data = df,
names_from = measure,
values_from = score)
pivot_longer(
data = df,
cols = c(height, weight),
names_to = "measure",
values_to = "score")
pivot_wider(
data = df,
names_from = score,
values_from = measure)
separate(
data = df,
col = measure,
into = c("height", "weight"))
race
activities
#| cache: false
library(tidyverse)
library(rcis)
data("dadmom")
dadmom
dadmom
## OPTION 1 - split into three separate operations
dadmom %>%
# use pivot_longer() to collect the relevant columns
pivot_longer(
cols = named:incm,
names_to = c("variable"),
values_to = "value",
# name and inc store data in separate column types
# simplify everything to character columns to avoid an error
values_transform = as.character
) %>%
# use separate() to split variable into name/inc column and d/m column
separate(col = variable, into = c("variable", "parent"), sep = -1) %>%
# now pivot the name/inc variables into separate columns
pivot_wider(
names_from = variable,
values_from = value
) %>%
# ensure income is stored as a numeric column (either integere or double is fine)
# alas there is no way to do this within pivot_wider()
mutate(inc = parse_number(inc))
dadmom
## OPTION 4 - lead with unite() then pivot_longer() and separate()
dadmom_tidy <- dadmom %>%
unite(col = "d", named, incd) %>%
unite(col = "m", namem, incm) %>%
pivot_longer(
cols = c(d, m),
names_to = "parent",
values_to = "name_inc") %>%
separate(name_inc, into = c("name", "inc"), convert = TRUE)
dadmom_tidy
dadmom
dadmom_tidy
# 1. Create the dataframe
df <- tribble(
fam_id, name_dad, income_dad, name_mom, income_mom,
1, "Bill", 70000, "Bess", 95000,
2, "Art", 62000, "Amy", 48000,
3, "Paul", 45000, "Pat", 30000
)
df <- tribble(
fam_id, name_dad, income_dad, name_mom, income_mom,
1, "Bill", 70000, "Bess", 95000,
2, "Art", 62000, "Amy", 48000,
3, "Paul", 45000, "Pat", 30000
)
library(tidyverse)
# 1. Create the dataframe
df <- tribble(
fam_id, name_dad, income_dad, name_mom, income_mom,
1, "Bill", 70000, "Bess", 95000,
2, "Art", 62000, "Amy", 48000,
3, "Paul", 45000, "Pat", 30000
)
df <- tibble(
fam_id, name_dad, income_dad, name_mom, income_mom,
1, "Bill", 70000, "Bess", 95000,
2, "Art", 62000, "Amy", 48000,
3, "Paul", 45000, "Pat", 30000
)
df <- tibble(
fam_id = c(1, 2, 3),
name_dad = c("Bill", "Art", "Paul"),
income_dad = c(70000, 62000, 45000),
name_mom = c("Bess", "Amy", "Pat"),
income_mom = c(95000, 48000, 30000)
)
df
df_tidy <- df %>%
pivot_longer(
cols = c(name_dad, income_dad, name_mom, income_mom),
names_to = c(".value", "parent"),
names_pattern = "(.*)_(.*)"
)
df_tidy
df_tidy
survey <- tibble(
country = rep(c("US", "Sweden", "Japan"), each = 30),
indicator = rep(c("Income_Inequality", "Education_Level", "Life_Satisfaction"), times = 30),
value = c(
# Income inequality (lower values better)
rnorm(30, mean = 0.39, sd = 0.05),
rnorm(30, mean = 85, sd = 5),
rnorm(30, mean = 7.5, sd = 0.8)
)
)
head(survey)
ggplot(survey, aes(x = country, y = value, color = indicator)) +
geom_point()
ggplot(survey, aes(x = country, y = value, color = indicator)) +
geom_box()
ggplot(survey, aes(x = country, y = value, color = indicator)) +
geom_boxplot()
ggplot(survey, aes(x = country, y = value, color = indicator)) +
geom_bar()
ggplot(survey, aes(x = country, y = value, color = indicator)) +
geom_histogram()
ggplot(survey, aes(x = country, y = value, fill = indicator)) +
geom_boxplot()
ggplot(data = survey, mapping = aes(x = country)) +
geom_histogram() +
facet_wrap(facets = vars(indicator))
ggplot(survey, aes(x = country, y = value, fill = indicator)) +
geom_boxplot()
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
survey <- tibble(
country = rep(c("US", "Sweden", "Japan"), each = 30),
indicator = rep(c("Income_Inequality", "Education_Level", "Life_Satisfaction"), times = 30),
value = c(
# Income inequality (lower values better)
rnorm(30, mean = 0.39, sd = 0.05),
rnorm(30, mean = 85, sd = 5),
rnorm(30, mean = 7.5, sd = 0.8)
)
)
head(survey)
ggplot(survey, aes(x = country, y = value, fill = indicator)) +
geom_boxplot()
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
survey <- tibble(
country = rep(c("US", "Sweden", "Japan"), each = 30),
indicator = rep(c("Income_Inequality", "Education_Level", "Life_Satisfaction"), times = 30),
value = c(
# Income inequality (lower values better)
rnorm(30, mean = 39, sd = 0.05),
rnorm(30, mean = 85, sd = 5),
rnorm(30, mean = 75, sd = 0.8)
)
)
head(survey)
ggplot(survey, aes(x = country, y = value, fill = indicator)) +
geom_boxplot()
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_histogram(stat = "identity") +
facet_wrap(~ indicator)
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
survey <- tibble(
country = rep(c("US", "Sweden", "Japan"), each = 30),
indicator = rep(c("Income_Inequality", "Education_Level", "Life_Satisfaction"), times = 30),
value = c(
# Income inequality (lower values better)
rnorm(30, mean = 39, sd = 0.05),
rnorm(30, mean = 85, sd = 5),
rnorm(30, mean = 75, sd = 0.8)
)
)
head(survey)
survey <- tibble(
country = rep(c("US", "Sweden", "Japan"), each = 3),
indicator = rep(c("Income_Inequality", "Education_Level", "Life_Satisfaction"), times = 3),
value = c(
39.0, 85.0, 7.5,   # US
28.5, 90.0, 8.2,   # Sweden
33.0, 88.0, 6.8    # Japan
)
)
survey
ggplot(survey, aes(x = country, y = value, fill = indicator)) +
geom_boxplot()
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
survey
survey <- tibble(
country = rep(c("US", "Sweden", "Japan"), each = 3),
indicator = rep(c("Income_Inequality", "Education_Level", "Life_Satisfaction"), times = 3),
value = c(
39.0, 85.0, 7.5,   # US
28.5, 90.0, 8.2,   # Sweden
33.0, 88.0, 6.8    # Japan
)
)
survey
survey_wide <- survey %>%
pivot_wider(names_from = indicator, values_from = value)
survey_wide
survey_wide
survey_wide
ggplot(survey_wide,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
survey <- tibble(
country = rep(c("US", "Sweden", "Japan"), each = 3),
indicator = rep(c("Income_Inequality", "Education_Level", "Life_Satisfaction"), times = 3),
value = c(
39.0, 85.0, 7.5,   # US
28.5, 90.0, 8.2,   # Sweden
33.0, 88.0, 6.8    # Japan
)
)
survey
#survey_wide <- survey %>%
#  pivot_wider(names_from = indicator, values_from = value)
#survey_wide
survey
library(tidyverse)
survey <- tibble(
country = rep(c("US", "Sweden", "Japan"), each = 3),
indicator = rep(c("Income_Inequality", "Education_Level", "Life_Satisfaction"), times = 3),
value = c(
39.0, 85.0, 7.5,
28.5, 90.0, 8.2,
33.0, 88.0, 6.8
)
)
survey_scaled <- survey %>%
group_by(indicator) %>%
mutate(scaled_value = scales::rescale(value, to = c(0, 100))) %>%
ungroup()
survey_scaled
survey_scaled
ggplot(survey_scaled,
aes(x = country, y = scaled_value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
ggplot(survey_scaled,
aes(x = country, y = scaled_value)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
ggplot(survey_scaled,
aes(x = country, y = scaled_value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
ggsave("faceted_bar_chart.png", plot = p, width = 8, height = 5, dpi = 300)
ggplot(survey_scaled,
aes(x = country, y = scaled_value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
ggsave("faceted_bar_chart.png", plot = p, width = 8, height = 5, dpi = 300)
survey <- tibble(
country = rep(c("US", "Sweden", "Japan"), each = 3),
indicator = rep(c("Income_Inequ", "Education", "Life_Satisf"), times = 3),
value = c(
39.0, 85.0, 7.5,   # US
28.5, 90.0, 8.2,   # Sweden
33.0, 88.0, 6.8    # Japan
)
)
survey
#survey_wide <- survey %>%
#  pivot_wider(names_from = indicator, values_from = value)
#survey_wide
ggplot(survey_scaled,
aes(x = country, y = scaled_value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
ggsave("faceted_bar_chart.png", plot = p, width = 8, height = 5, dpi = 300)
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
survey <- tibble(
country = rep(c("US", "Sweden", "Japan"), each = 3),
indicator = rep(c("Income_Inequality", "Education_Level", "Life_Satisfaction"), times = 3),
value = c(
39.0, 85.0, 7.5,   # US
28.5, 90.0, 8.2,   # Sweden
33.0, 88.0, 6.8    # Japan
)
)
survey
#survey_wide <- survey %>%
#  pivot_wider(names_from = indicator, values_from = value)
#survey_wide
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
survey <- tibble(
country = rep(c("US", "Sweden", "Japan"), each = 3),
indicator = rep(c("Income_Inequality", "Education_Level", "Life_Satisfaction"), times = 3),
value = c(
69.0, 84.0, 75.5,   # US
48.5, 90.0, 80.5,   # Sweden
53.0, 88.0, 68.0    # Japan
)
)
survey
#survey_wide <- survey %>%
#  pivot_wider(names_from = indicator, values_from = value)
#survey_wide
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
survey
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
ggplot(survey,
aes(x = country, y = value, fill = country)) +
geom_bar(stat = "identity") +
facet_wrap(~ indicator)
ggsave("facted_bar_indicator.png")
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
library(tidyverse)
library(stevedata)
library(knitr)
library(psych)
# load data
data(gss_wages)
# write your code here, add as many code chunks as you like
head(gss_wages)
glimpse(gss_wages)
head(gss_wages)
head(gss_wages)
survey <- tibble(
job = c("Teacher", "Engineer", "Lawyer", "Teacher",
"Artist", "Lawyer", "Engineer", "Teacher", "Artist"),
income = c(52, 78, 95, 68, 45, 90, 82, 55, 50)
)
survey
ggplot(survey, x = job, y = income) +
geom_boxplot()
ggplot(survey, aes(x = job, y = income)) +
geom_boxplot()
ggplot(survey, aes(x = income, y = job)) +
geom_boxplot()
survey |>
group_by(job) |>
summarize(mean(job, rm.na = TRUE))
survey |>
group_by(job) |>
summarize(mean(income, rm.na = TRUE))
survey |>
group_by(job) |>
summarize(mean(avg_income = income, rm.na = TRUE))
survey |>
group_by(job) |>
summarize(avg_income = mean(income, rm.na = TRUE))
twitter <- tibble(
user = c("alice", "bob", "carlos", "diana", "emily",
"farid", "grace", "hannah", "ivan", "julia"),
followers_count = c(320, 1500, 870, 2300, 540,
1200, 460, 3500, 290, 870),
likes = c(45, 80, 22, 130, 55, 60, 15, 240, 18, 35),
retweets = c(10, 25, 5, 50, 12, 20, 3, 70, 2, 4),
language = c("en", "es", "en", "en", "fr", "en",
"en", "en", "es", "en"),
state = c("California", "Texas", "Texas", "New York", "Illinois",
"California", "Texas", "New York", "Florida", "Illinois")
)
twitter
head(twitter)
twitter <- tibble(
user = c("alice", "bob", "carlos", "diana", "emily",
"farid", "grace", "hannah", "ivan", "julia"),
followers_count = c(320, 1500, 870, 2300, 540,
1200, 460, 3500, 290, 870),
retweets = c(10, 25, 5, 50, 12, 20, 3, 70, 2, 4),
language = c("en", "es", "en", "en", "fr", "en",
"en", "en", "es", "en"),
state = c("California", "Texas", "Texas", "New York", "Illinois",
"California", "Texas", "New York", "Florida", "Illinois")
)
twitter
head(twitter)
head(twitter)
twitter <- tibble(
user = c("alice", "bob", "carlos", "diana", "emily",
"farid", "grace", "hannah", "ivan", "julia"),
likes = c(45, 80, 22, 130, 55, 60, 15, 240, 18, 35),
retweets = c(10, 25, 5, 50, 12, 20, 3, 70, 2, 4),
language = c("en", "es", "en", "en", "fr", "en",
"en", "en", "es", "en"),
state = c("California", "Texas", "Texas", "New York", "Illinois",
"California", "Texas", "New York", "Florida", "Illinois")
)
twitter
head(twitter)
head(twitter)
twitter %>%
filter(language == "en") %>%
group_by(state) %>%
summarize(avg_likes = mean(likes, na.rm = TRUE))
twitter %>%
filter(language == "en") %>%
group_by(state) %>%
summarize(tot_likes = sum(likes))
twitter
