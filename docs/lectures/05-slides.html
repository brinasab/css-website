<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-4a990d8dcb58f517c7c86712b8f2ac7c.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.31">

  <meta name="author" content="Sabrina Nardin, Fall 2025">
  <title>css-website ‚Äì Computing for the Social Sciences: Lecture 5</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-864c5404f4710dceefb0a9fe440f50a1.css">
  <link rel="stylesheet" href="../style/styles.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Computing for the Social Sciences: Lecture 5</h1>
  <p class="subtitle">Topics: Intro to dplyr, Pipes</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Sabrina Nardin, Fall 2025 
</div>
</div>
</div>

</section>
<section id="agenda" class="title-slide slide level1 center">
<h1>Agenda</h1>
<div class="agenda-list">
<ol type="1">
<li>Programming as Problem-Solving</li>
<li>Operators</li>
<li>Main <code>dplyr</code> functions</li>
<li>Pipes (<code>%&gt;%</code> or <code>|&gt;</code>)</li>
</ol>
</div>
<p><span style="font-size: 0.8em; color: #666;"> <em>Slides last updated on <strong>October 13, 2025</strong>. Slides authored by Sabrina Nardin. AI used to polish slides style and fix typos.</em> </span></p>
<!--
## Homework 1 Feedback: Great Work!

### ‚úÖ Achieved Goals

- Got familiar with **Git and GitHub** and **R Markdown syntax** (they take patience and repetition)
- Shared interesting bios, links, and images... thanks!

### üí° Tips for Success

- Push all required files to GitHub  
- Commit **frequently**: from 5 to 20 commits per assignment  
- Embrace **learning-by-doing** (e.g., adding images), but post on **Ed Discussion** if you run into issues
- Check our feedback on this homework: we‚Äôll be stricter on the next ones (harder, point-based)
- AI and Plagiarism: see Syllabus and Lecture 1 Slides 
-->
</section>

<section>
<section id="programming-as-problem-solving" class="title-slide slide level1 center middle">
<h1>1. Programming as Problem-Solving</h1>

</section>
<section id="meet-the-palmer-penguins" class="slide level2 center">
<h2><a href="https://allisonhorst.github.io/palmerpenguins/#meet-the-palmer-penguins">Meet the Palmer Penguins!</a></h2>
<p>The palmerpenguins package includes two datasets (already installed on our Workbench):</p>
<ul>
<li><strong>penguins</strong> with clean data of 244 penguins ‚Äî we use this today<br>
</li>
<li><strong>penguins_raw</strong> with uncleaned version the same data</li>
</ul>

<img data-src="https://allisonhorst.github.io/palmerpenguins/reference/figures/lter_penguins.png" style="width:90.0%" class="r-stretch quarto-figure-center"><p class="caption">Penguins by Allison Horst</p></section>
<section id="meet-the-palmer-penguins-1" class="slide level2 center">
<h2><a href="https://allisonhorst.github.io/palmerpenguins/#meet-the-palmer-penguins">Meet the Palmer Penguins!</a></h2>
<div class="columns">
<div class="column" style="width:55%;">
<p><strong>Data (variables) we have about these 244 penguins:</strong></p>
<ul>
<li>Species: <em>Adelie</em>, <em>Chinstrap</em>, <em>Gentoo</em><br>
</li>
<li>Island: <em>Biscoe</em>, <em>Dream</em>, <em>Torgersen</em><br>
</li>
<li>Bill length<br>
</li>
<li>Bill depth<br>
</li>
<li>Flipper length<br>
</li>
<li>Body mass<br>
</li>
<li>Sex<br>
</li>
<li>Year</li>
</ul>
</div><div class="column" style="width:45%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://tse1.mm.bing.net/th/id/OIP.vCDWhB3o8dbNn63UPqJQaAHaEx?pid=Api" style="width:100.0%"></p>
<figcaption>Bill Measurement</figcaption>
</figure>
</div>
</div></div>
</section>
<section id="penguins-dataset-overview" class="slide level2 center">
<h2>Penguins Dataset Overview</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co"># load packages</span></span>
<span id="cb1-2"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb1-4"><a></a></span>
<span id="cb1-5"><a></a><span class="co"># explore data</span></span>
<span id="cb1-6"><a></a><span class="fu">bind_rows</span>(<span class="fu">head</span>(penguins, <span class="dv">5</span>), <span class="fu">tail</span>(penguins, <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
<div class="cell">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 8
   species   island   bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;     &lt;fct&gt;             &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie    Torgers‚Ä¶           39.1          18.7               181        3750
 2 Adelie    Torgers‚Ä¶           39.5          17.4               186        3800
 3 Adelie    Torgers‚Ä¶           40.3          18                 195        3250
 4 Adelie    Torgers‚Ä¶           NA            NA                  NA          NA
 5 Adelie    Torgers‚Ä¶           36.7          19.3               193        3450
 6 Chinstrap Dream              55.8          19.8               207        4000
 7 Chinstrap Dream              43.5          18.1               202        3400
 8 Chinstrap Dream              49.6          18.2               193        3775
 9 Chinstrap Dream              50.8          19                 210        4100
10 Chinstrap Dream              50.2          18.7               198        3775
# ‚Ñπ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="scatterplot-flipper-length-vs.-body-mass" class="slide level2 center">
<h2>Scatterplot: Flipper Length vs.&nbsp;Body Mass</h2>
<p>Start from what we know: <strong>scatter plot with two numeric variables</strong></p>
<p>Copy and paste this code in R (use R version 4.5.1):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-2"><a></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb3-3"><a></a><span class="fu">head</span>(penguins)</span>
<span id="cb3-4"><a></a></span>
<span id="cb3-5"><a></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb3-6"><a></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb3-7"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Penguins: Body Mass vs. Flipper Length"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
<div class="fragment">
<p>Interpret: <strong>How does the relationship between flipper length and body mass differ across species?</strong></p>
</div>
<p><br></p>
</section>
<section id="bar-plot-number-of-penguins-by-species" class="slide level2 center">
<h2>Bar Plot: Number of Penguins by Species</h2>
<p>Try a different plot: <strong>bar plot with counts for one categorical variable</strong></p>
<p>Copy and paste this code in R (use R version 4.5.1):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb4-2"><a></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb4-3"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Count of Penguins by Species"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
<div class="fragment">
<p>Interpret: <strong>What does this bar plot tell us about penguin species frequency?</strong></p>
</div>
<p><br></p>
<!--
## Make, Store, Save a Plot

Only **make** a plot

```r
ggplot(data = penguins, aes(x = species)) +
  geom_bar() +
  labs(title = "Count of Penguins by Species")
```

Make a plot and **store** it to an object

```r
species_count <- ggplot(data = penguins, aes(x = species)) +
  geom_bar() +
  labs(title = "Count of Penguins by Species")
species_count
```

Make a plot, store it, and **save** it in your current working directory

```r
species_count <- ggplot(data = penguins, aes(x = species)) +
  geom_bar() +
  labs(title = "Count of Penguins by Species")
species_count
ggsave("penguins-species-count.png", plot = species_count)
```

**Note:** `ggsave()` saves the *last displayed plot* by default. You can also assign it to a variable and pass it explicitly.
-->
</section>
<section id="data-manipulation-with-dplyr" class="slide level2 center">
<h2>Data Manipulation with dplyr</h2>
<p>Today we introduce a second package from the tidyverse: <strong><a href="https://dplyr.tidyverse.org/">dplyr</a> for data manipulation.</strong></p>
<ul>
<li><p>Designed for <strong>manipulating data frames and tibbles</strong></p></li>
<li><p>Includes <strong>intuitive, clearly named functions</strong> for common tasks like:</p>
<ul>
<li><code>filter()</code> to keep rows based on conditions,</li>
<li><code>summarize()</code> to calculate summaries (e.g., averages),</li>
<li><code>group_by</code> for grouped operations,</li>
<li>and many more functions</li>
</ul></li>
</ul>
<p><em>Let‚Äôs work together through two questions that require us to use these three dplyr functions!</em></p>
<!-- TEACHING NOTES:
1. Ask what is data manipulation: process of changing or reshaping data to make it easier to understand, analyze, or visualize. Selecting columns or variables, filtering rows, summarizing data, etc. 
2. Code the rest of the slides together, do not give time to students to think first, just show the logic by doing it and ask them to follow along -->
</section>
<section id="programming-is-problem-solving" class="slide level2 center">
<h2>Programming is Problem-Solving</h2>
<p><strong>Penguins Dataset:</strong></p>
<div class="cell">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen           39.1          18.7               181        3750
2 Adelie  Torgersen           39.5          17.4               186        3800
3 Adelie  Torgersen           40.3          18                 195        3250
4 Adelie  Torgersen           NA            NA                  NA          NA
# ‚Ñπ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
</div>
<div title="From Question to Code: Practice Translating Logic into R">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>From Question to Code: Practice Translating Logic into R</strong></p>
</div>
<div class="callout-content">
<p><strong>Q1:</strong> What is the average body mass of an Adelie penguin?</p>
<p><strong>Q2:</strong> What is the average body mass for each penguin species (we have three species)?</p>
<p><strong>Our Goals</strong><br>
1. Identify the logical/conceptual steps you‚Äôd give R to answer these questions<br>
2. Translate those steps into clear, executable code</p>
</div>
</div>
</div>
</div>
</section>
<section id="q1-what-is-the-average-body-mass-of-an-adelie-penguin" class="slide level2 center">
<h2>Q1: What is the average body mass of an Adelie penguin?</h2>
<p><strong>Penguins Dataset:</strong></p>
<div class="cell">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen           39.1          18.7               181        3750
2 Adelie  Torgersen           39.5          17.4               186        3800
3 Adelie  Torgersen           40.3          18                 195        3250
4 Adelie  Torgersen           NA            NA                  NA          NA
# ‚Ñπ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
</div>
<p><br></p>
<p><strong>Instructions to answer the first question:</strong></p>
<ol type="1">
<li>Identify the data and variables you need</li>
<li>Filter only the observations (rows) where <code>species</code> is Adelie</li>
<li>Calculate the mean of the variable <code>body_mass_g</code> for this group</li>
</ol>
<p><strong>Open R: let‚Äôs turn to these steps into code using <code>dplyr</code></strong></p>
<p><br></p>
<!--
data(penguins)
penguins_adelie <- filter(penguins, species == "Adelie")
summarize(penguins_adelie, avg_mass_adelie = mean(body_mass_g, na.rm = TRUE))

# or if I want to show manual calculation of mean vs mean() function
filter(penguins, species == "Adelie") 
summarize(total_mass = sum(body_mass_g),
          count = n(),
          manual_mean = total_mass / count)
-->
</section>
<section id="q2-what-is-the-average-body-mass-for-each-penguin-species" class="slide level2 center">
<h2>Q2: What is the average body mass for each penguin species?</h2>
<p><strong>Penguins Dataset:</strong></p>
<div class="cell">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen           39.1          18.7               181        3750
2 Adelie  Torgersen           39.5          17.4               186        3800
3 Adelie  Torgersen           40.3          18                 195        3250
4 Adelie  Torgersen           NA            NA                  NA          NA
# ‚Ñπ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
</div>
<p><br></p>
<p><strong>Instructions to answer the second question:</strong></p>
<ol type="1">
<li>Identify the data and variables you need</li>
<li>Group the observations (rows) by <code>species</code></li>
<li>Calculate the mean of the variable <code>body_mass_g</code> for all groups</li>
</ol>
<p><strong>Open R: let‚Äôs turn to these steps into code using <code>dplyr</code></strong></p>
<p><br></p>
<!--

::: {.cell}
::: {.cell-output .cell-output-stdout}

```
# A tibble: 3 √ó 2
  species   avg_mass
  <fct>        <dbl>
1 Adelie       3701.
2 Chinstrap    3733.
3 Gentoo       5076.
```


:::
:::

-->
</section></section>
<section>
<section id="operators" class="title-slide slide level1 center middle">
<h1>2. Operators</h1>

</section>
<section id="assignment-operators" class="slide level2 center">
<h2>Assignment Operators</h2>
<pre><code>x &lt;- 5                # assign 5 to an object
mean(x = c(1, 2, 3))  # use = to specify an argument inside a function</code></pre>
<p><br> <fragment></fragment></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>penguins_species <span class="ot">&lt;-</span> <span class="fu">group_by</span>(penguins, species)</span>
<span id="cb9-2"><a></a><span class="fu">summarize</span>(penguins_species, <span class="at">avg_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p> <br></p>
</section>
<section id="logical-operators" class="slide level2 center">
<h2>Logical Operators</h2>
<pre><code>x == x    # is equal (TRUE or FALSE)
x != y    # is not equal (TRUE or FALSE) 
x &lt; y     # less than
x &lt;= y    # less than or equal to 
y &gt; x     # more than
y &gt;=      # more than or equal to</code></pre>
<p><br></p>
<div class="cell fragment">
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>adelie <span class="ot">&lt;-</span> <span class="fu">filter</span>(penguins, species <span class="sc">==</span> <span class="st">"Adelie"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell fragment">
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>no_adelie <span class="ot">&lt;-</span> <span class="fu">filter</span>(penguins, species <span class="sc">!=</span> <span class="st">"Adelie"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell fragment">
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>heavy <span class="ot">&lt;-</span> <span class="fu">filter</span>(penguins, body_mass_g <span class="sc">&gt;</span> <span class="dv">4500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</section>
<section id="more-logical-operators" class="slide level2 center">
<h2>More Logical Operators</h2>
<pre><code>x | y     # EITHER x OR y has to be true
x &amp; y     # BOTH x AND y have to be true
x &amp;! y    # x AND NOT y (x is true AND y is false)</code></pre>
<p><br></p>
<div class="cell fragment">
<p>Example use of <code>|</code> operator. What does this code return?</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="fu">filter</span>(penguins, species <span class="sc">==</span> <span class="st">"Adelie"</span> <span class="sc">|</span> species <span class="sc">==</span> <span class="st">"Chinstrap"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell fragment">
<p>Example use of <code>&amp;</code> operator. What does this code return?</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="fu">filter</span>(penguins, species <span class="sc">==</span> <span class="st">"Adelie"</span> <span class="sc">&amp;</span> species <span class="sc">==</span> <span class="st">"Chinstrap"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</section>
<section id="the-or-operator-can-be-used-in-two-ways" class="slide level2 center">
<h2>The OR operator can be used in two ways</h2>
<pre><code>x | y     # EITHER x OR y has to be true
x &amp; y     # BOTH x AND y have to be true
x &amp;! y    # x AND NOT y (x is true AND y is false)</code></pre>
<p><br></p>
<div class="cell fragment">
<p>Example use of <code>|</code> operator with the extended syntax:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>penguins_adelie_chin <span class="ot">&lt;-</span> <span class="fu">filter</span>(penguins, species <span class="sc">==</span> <span class="st">"Adelie"</span> <span class="sc">|</span> species <span class="sc">==</span> <span class="st">"Chinstrap"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell fragment">
<p>Same code with the shorter syntax using <code>%in%</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>penguins_adelie_chin <span class="ot">&lt;-</span> <span class="fu">filter</span>(penguins, species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Adelie"</span>, <span class="st">"Chinstrap"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</section>
<section id="practice-logical-operators-with-filter" class="slide level2 center">
<h2>üíª Practice: Logical Operators with filter()</h2>
<p>Logical operators are often used together with the <code>filter()</code> function from <code>dplyr</code></p>
<p>Practice using them with the penguins dataset:</p>
<ul>
<li><p><strong>Task 1:</strong> Get all Adelie penguins with flipper length greater than or equal to 180 mm</p></li>
<li><p><strong>Task 2:</strong> Get all penguins on Dream and Torgersen islands that are not female</p></li>
</ul>
<p>Share your code here: <a href="https://codeshare.io/5zlNLE" class="uri">https://codeshare.io/5zlNLE</a></p>
<!--
- **Task 3:** Get all female penguins on Dream Island with body mass between 3000 and 4000 grams inclusive
-->
</section></section>
<section>
<section id="main-dplyr-functions" class="title-slide slide level1 center middle">
<h1>3. Main dplyr functions</h1>

</section>
<section id="recap-of-what-learned-so-far" class="slide level2 center">
<h2>Recap of What Learned so Far</h2>
<p>Conceptually, any data transformation using <code>dplyr</code> requires us to:</p>
<ol type="1">
<li><p>Identify the data frame and the variables we need</p></li>
<li><p>Use <code>dplyr</code> functions to tell R what action to take on which variable(s). These functions:</p>
<ul>
<li>Act <em>like verbs</em> in a sentence: they express <em>what to do</em> with the data</li>
<li>Can be <em>combined</em> to perform complex operations</li>
</ul></li>
<li><p>Save the result, usually into a new object (a new dataframe)</p></li>
</ol>
</section>
<section id="key-dplyr-functions" class="slide level2 center">
<h2>Key dplyr Functions</h2>
<p>The package <code>dplyr</code> has many functions, but you don‚Äôt need to memorize them all!</p>
<p><strong>Our Goals: Memorize the key functions + Look up the rest <a href="https://dplyr.tidyverse.org/">dplyr.tidyverse.org</a></strong></p>
</section>
<section id="key-dplyr-functions-1" class="slide level2 center">
<h2>Key dplyr Functions</h2>
<table class="caption-top">
<colgroup>
<col style="width: 18%">
<col style="width: 81%">
</colgroup>
<thead>
<tr class="header">
<th><code>function()</code></th>
<th>What it does</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>filter()</code></td>
<td>Selects rows based on values in one or more columns</td>
</tr>
<tr class="even">
<td><code>arrange()</code></td>
<td>Reorders rows based on the values in specified columns</td>
</tr>
<tr class="odd">
<td><code>select()</code></td>
<td>Chooses specific columns by name</td>
</tr>
<tr class="even">
<td><code>rename()</code></td>
<td>Renames one or more columns</td>
</tr>
<tr class="odd">
<td><code>mutate()</code></td>
<td>Adds new columns or modifies existing ones</td>
</tr>
<tr class="even">
<td><code>group_by()</code></td>
<td>Groups the data by one or more variables for grouped operations</td>
</tr>
<tr class="odd">
<td><code>summarize()</code></td>
<td>Reduces each group to a single row using summary statistics (e.g., mean, sum, n)</td>
</tr>
</tbody>
</table>
<p><br></p>
<div title="Tip for Remembering These Functions">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip for Remembering These Functions</strong></p>
</div>
<div class="callout-content">
<p>Each <strong>row is an observation</strong> (e.g., one penguin) and each <strong>column is a variable</strong> (e.g., species, body mass). Some functions works on rows like <code>filter()</code>, <code>arrange()</code> others on columns like <code>select()</code>, <code>mutate()</code>.</p>
</div>
</div>
</div>
</div>
<p><br></p>
<!--
`function()`  | Action performed
--------------|--------------------------------------------------------
`filter()`    | Picks observations from the data frame based on their values (operates on rows)
`arrange()`   | Changes the order of observations, based on their values (operates on rows)
`select()`    | Picks variables from the data frame based on their names (operates on columns)
`rename()`    | Changes the name of columns in the data frame
`mutate()`    | Creates new columns from existing ones
`group_by()`  | Changes the unit of analysis from the complete data frame to individual groups
`summarize()` | Collapses the data frame to a smaller number of rows to summarize the larger data (commonly used with mean, sum, n-distinct, etc.)

---

## American vs. British English

* US `summarize()` = UK `summarise()`

* US `color()` = UK `colour()`

-->
</section>
<section id="unpacking-group_by" class="slide level2 center">
<h2>Unpacking group_by()</h2>
<p>This function tells R to <strong>temporarily group the data</strong> by one or more variables, so the <strong>next function runs within each group</strong>. For example, this code groups the data by species, so whatever runs next (here summarize) happens for each species separately:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>grouped <span class="ot">&lt;-</span> <span class="fu">group_by</span>(penguins, species)</span>
<span id="cb20-2"><a></a><span class="fu">summarize</span>(grouped, <span class="at">avg_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell fragment">
<div title="group_by() does not change the data">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>group_by() does not change the data</strong></p>
</div>
<div class="callout-content">
<p><code>group_by()</code> doesn‚Äôt change your data: it changes how the next function treats the data. Typically, it is used before <code>summarize()</code>, <code>fiter()</code>, <code>mutate()</code>, or <code>arrange()</code> to make those functions run once per group, not across the whole dataset.</p>
</div>
</div>
</div>
</div>
</div>
<p></p>
</section>
<section id="practice" class="slide level2 center">
<h2>üíª Practice</h2>
<h3 id="what-is-the-average-body-mass-for-adelie-penguins-by-sex">What is the average body mass for Adelie penguins by sex?</h3>
<p><br></p>
<p><strong>First, think:</strong> How would you approach this question conceptually? Break it down into clear steps before coding.</p>
<p><strong>Then, code:</strong> Translate those steps into R using the appropriate <code>dplyr</code> functions.</p>
<p><strong>Hint:</strong> You‚Äôll need to use <em>three</em> <code>dplyr</code> functions here</p>
<p>Share your code here: <a href="https://codeshare.io/5zlNLE" class="uri">https://codeshare.io/5zlNLE</a></p>
<p><br></p>
<!--

Solution 1: filter, then group by (best)


::: {.cell}

```{.r .cell-code}
penguins_adelie <- filter(.data = penguins, species == "Adelie")
penguins_adelie_sex <- group_by(.data = penguins_adelie, sex)
summarize(
  .data = penguins_adelie_sex,
  avg_bill = mean(bill_length_mm, na.rm = TRUE),
  avg_mass = mean(body_mass_g, na.rm = TRUE)
)
```

::: {.cell-output .cell-output-stdout}

```
# A tibble: 3 √ó 3
  sex    avg_bill avg_mass
  <fct>     <dbl>    <dbl>
1 female     37.3    3369.
2 male       40.4    4043.
3 <NA>       37.8    3540 
```


:::
:::


Solution 2: group by, then filter (ok)


::: {.cell}

```{.r .cell-code}
penguins_sex <- group_by(.data = penguins, sex)
penguins_sex_adelie <- filter(.data = penguins_sex, species == "Adelie")
results <- summarize(
  .data = penguins_sex_adelie,
  avg_bill = mean(bill_length_mm, na.rm = TRUE),
  avg_mass = mean(body_mass_g, na.rm = TRUE)
)
print(results)
```

::: {.cell-output .cell-output-stdout}

```
# A tibble: 3 √ó 3
  sex    avg_bill avg_mass
  <fct>     <dbl>    <dbl>
1 female     37.3    3369.
2 male       40.4    4043.
3 <NA>       37.8    3540 
```


:::
:::


-->
</section>
<section id="filter-or-group-first" class="slide level2 center">
<h2>üß† Filter or Group First?</h2>
<h3 id="task-calculate-the-average-body-mass-for-adelie-penguins-by-sex.">Task: Calculate the average body mass for Adelie penguins by sex.</h3>
<p><br></p>
<ul>
<li>‚úÖ Filter for <code>Adelie</code>, then group by <code>sex</code>, then summarize</li>
<li>Group by <code>sex</code>, then filter for <code>Adelie</code>, then summarize<br>
</li>
<li>Group by <code>species</code>, filter for <code>Adelie</code>, then group by <code>sex</code>, then summarize<br>
</li>
<li>Filter by both <code>species</code> and <code>sex</code>, then group, then summarize<br>
</li>
<li>Group by both <code>species</code> and <code>sex</code>, then summarize, then filter</li>
</ul>
<p>The first is the best approach in this case. The other approaches are all correct (try them out!), but are less readable or do more work than needed.</p>
<p>The next slide compares the first two, which are the most common.</p>
<p><br></p>
</section>
<section id="filter-or-group-first-1" class="slide level2 center">
<h2>üß† Filter or Group First?</h2>
<h3 id="task-calculate-the-average-body-mass-for-adelie-penguins-by-sex.-1">Task: Calculate the average body mass for Adelie penguins by sex.</h3>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="filter-group-best-practice-here">Filter ‚Üí Group (Best Practice here)</h4>
<ul>
<li>Filter first to keep only Adelie penguins<br>
‚Üí reduces rows right away</li>
<li>Group the filtered data by sex<br>
‚Üí only relevant data is grouped<br>
</li>
<li>Summarize to get average<br>
</li>
</ul>
</div><div class="column" style="width:50%;">
<h4 id="group-filter-works-but-not-ideal-here">Group ‚Üí Filter (Works but Not Ideal here)</h4>
<ul>
<li>Group all penguins by sex<br>
‚Üí includes extra, unneeded data<br>
</li>
<li>Filter to keep only Adelie penguins<br>
‚Üí discards part of what was grouped<br>
</li>
<li>Summarize to get average</li>
</ul>
</div></div>
<p><br></p>
</section>
<section id="filter-or-group-first-2" class="slide level2 center">
<h2>üß† Filter or Group First?</h2>
<h3 id="the-best-order-depends-on-the-task-think-first-but-heres-a-rule-of-thumb">The best order depends on the task <em>(think first!)</em> but here‚Äôs a rule of thumb:</h3>
<p><br></p>
<p><strong>Filter first when you can reduce the data before grouping.</strong> <em>Example: Calculate the average body mass for Adelie penguins by sex.</em></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a>adelie <span class="ot">&lt;-</span> <span class="fu">filter</span>(penguins, species <span class="sc">==</span> <span class="st">"Adelie"</span>)</span>
<span id="cb21-2"><a></a>adelie_by_sex <span class="ot">&lt;-</span> <span class="fu">group_by</span>(adelie, sex)</span>
<span id="cb21-3"><a></a>result <span class="ot">&lt;-</span> <span class="fu">summarize</span>(adelie_by_sex, </span>
<span id="cb21-4"><a></a>                    <span class="at">avg_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
<p><strong>Group first only when your filter depends on group-level summaries.</strong> <em>Example: Calculate the average body mass only for species whose average bill length is over 40 mm.</em></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>by_species <span class="ot">&lt;-</span> <span class="fu">group_by</span>(penguins, species)</span>
<span id="cb22-2"><a></a>avg_bill_high <span class="ot">&lt;-</span> <span class="fu">filter</span>(by_species, <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">40</span>)</span>
<span id="cb22-3"><a></a>result <span class="ot">&lt;-</span> <span class="fu">summarize</span>(avg_bill_high, </span>
<span id="cb22-4"><a></a>                    <span class="at">avg_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section></section>
<section>
<section id="pipes-or" class="title-slide slide level1 center middle">
<h1>4. Pipes %&gt;% or |&gt;</h1>

</section>
<section id="pipes-to-chain-commands" class="slide level2 center">
<h2>Pipes to Chain Commands</h2>
<p>Pipes allow you to write a sequence of operations by <strong>passing the result of one function into the next</strong> making your code more readable and logical. Compare these two versions of the same code to calculate the average body mass for Adelie penguins by island.</p>
<p><strong>Without pipes:</strong></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>adelie <span class="ot">&lt;-</span> <span class="fu">filter</span>(penguins, species <span class="sc">==</span> <span class="st">"Adelie"</span>)</span>
<span id="cb23-2"><a></a>adelie_island <span class="ot">&lt;-</span> <span class="fu">group_by</span>(adelie, island)</span>
<span id="cb23-3"><a></a>adelie_avg_mass_island <span class="ot">&lt;-</span> <span class="fu">summarize</span>(adelie_island, <span class="at">body_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>With pipes %&gt;% or |&gt;:</strong></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>adelie_avg_mass_island <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span></span>
<span id="cb24-2"><a></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Adelie"</span>) <span class="sc">|&gt;</span></span>
<span id="cb24-3"><a></a>  <span class="fu">group_by</span>(island) <span class="sc">|&gt;</span></span>
<span id="cb24-4"><a></a>  <span class="fu">summarize</span>(<span class="at">body_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="multiple-ways-to-write-r-code-pipes-are-often-the-best-choice" class="slide level2 center">
<h2>Multiple Ways to Write R Code ‚Äî Pipes Are Often the Best Choice</h2>
<p>Pipes are great and our ultimate goal. But there are several ways to write the same R code.</p>
<p>In fact, R didn‚Äôt have pipes for a long time!</p>
<p><strong>Let‚Äôs compare different ways to write the same code‚Ä¶</strong></p>
</section>
<section id="four-different-options-to-code-this-task" class="slide level2 center">
<h2>Four Different Options to Code This Task</h2>
<h3 id="task-calculate-the-average-body-mass-for-adelie-penguins-by-island.">Task: Calculate the average body mass for Adelie penguins by island.</h3>
<p><br></p>
<div title="Strategy: Break Down the Task Before You Code it!">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Strategy: Break Down the Task Before You Code it!</strong></p>
</div>
<div class="callout-content">
<ul>
<li>Identify data and variable needed<br>
</li>
<li>Filter the data for rows where <code>species</code> is Adelie<br>
</li>
<li>Group the filtered data by <code>island</code><br>
</li>
<li>Calculate the average body mass for each group</li>
</ul>
</div>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="option-1-save-each-step-in-a-new-data-frame" class="slide level2 center">
<h2>Option 1: Save each step in a new data frame</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>penguins_adelie <span class="ot">&lt;-</span> <span class="fu">filter</span>(penguins, species <span class="sc">==</span> <span class="st">"Adelie"</span>)</span>
<span id="cb25-2"><a></a>penguins_adelie_island <span class="ot">&lt;-</span> <span class="fu">group_by</span>(penguins_adelie, island)</span>
<span id="cb25-3"><a></a>penguins_final <span class="ot">&lt;-</span> <span class="fu">summarize</span>(penguins_adelie_island, </span>
<span id="cb25-4"><a></a>                            <span class="at">body_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb25-5"><a></a><span class="fu">print</span>(penguins_final)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  island    body_mass
  &lt;fct&gt;         &lt;dbl&gt;
1 Biscoe        3710.
2 Dream         3688.
3 Torgersen     3706.</code></pre>
</div>
</div>
<p><br></p>
<div class="fragment">
<p>‚úÖ This is valid code.</p>
<p>‚ö†Ô∏è <strong>Drawback: You must save each intermediate object.</strong> This can clutter your environment, increase R memory usage with large datasets, and make your code more prone to typos. Shorter names for each step might reduce typos but sacrifice clarity, which is not good for self-documentation.</p>
<p><br></p>
</div>
</section>
<section id="option-2-replace-the-original-data-frame" class="slide level2 center">
<h2>Option 2: Replace the original data frame</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>penguins <span class="ot">&lt;-</span> <span class="fu">filter</span>(penguins, species <span class="sc">==</span> <span class="st">"Adelie"</span>)</span>
<span id="cb27-2"><a></a>penguins <span class="ot">&lt;-</span> <span class="fu">group_by</span>(penguins, island)</span>
<span id="cb27-3"><a></a>penguins <span class="ot">&lt;-</span> <span class="fu">summarize</span>(penguins, <span class="at">body_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb27-4"><a></a><span class="fu">print</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  island    body_mass
  &lt;fct&gt;         &lt;dbl&gt;
1 Biscoe        3710.
2 Dream         3688.
3 Torgersen     3706.</code></pre>
</div>
</div>
<p><br></p>
<div class="fragment">
<p>‚úÖ This also works, but it‚Äôs not good practice.</p>
<p><strong>‚ö†Ô∏è Drawback: It overwrites the original dataset.</strong> If something goes wrong midway, you need to re-run everything.</p>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>This approach is risky ‚Äî especially when working with important datasets. Always keep a copy of your original data before modifying it.</p>
</div>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="option-3-function-composition" class="slide level2 center">
<h2>Option 3: Function composition</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a><span class="fu">data</span>(penguins)</span>
<span id="cb29-2"><a></a><span class="fu">summarize</span>(<span class="fu">group_by</span>(<span class="fu">filter</span>(penguins, species <span class="sc">==</span> <span class="st">"Adelie"</span>), island), </span>
<span id="cb29-3"><a></a>          <span class="at">body_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  island    body_mass
  &lt;fct&gt;         &lt;dbl&gt;
1 Biscoe        3710.
2 Dream         3688.
3 Torgersen     3706.</code></pre>
</div>
</div>
<p><br></p>
<div class="fragment">
<p>‚úÖ This also works, and some people like this style.</p>
<p><strong>‚ö†Ô∏è Drawback: It‚Äôs harder to read and debug.</strong> You must follow it from the inside out, which makes it harder to read for humans. If something breaks, it‚Äôs difficult to isolate where the error is happening as you can‚Äôt easily inspect intermediate results.</p>
</div>
<p><br></p>
</section>
<section id="option-4-pipes-the-winner" class="slide level2 center">
<h2>Option 4: Pipes (The Winner!)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Adelie"</span>) <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a></a>  <span class="fu">group_by</span>(island) <span class="sc">|&gt;</span></span>
<span id="cb31-4"><a></a>  <span class="fu">summarize</span>(<span class="at">body_mass =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  island    body_mass
  &lt;fct&gt;         &lt;dbl&gt;
1 Biscoe        3710.
2 Dream         3688.
3 Torgersen     3706.</code></pre>
</div>
</div>
<p><br></p>
<div class="fragment">
<p>‚úÖ This is valid and readable code ‚Äî without the drawbacks of the previous options.</p>
<p><strong>üí° Why pipes?</strong> The pipe operator passes the result of one function to the next, making your code easier to read. Pipes emphasize <strong>actions</strong>, not object names and you can read the code like a recipe:</p>
<ul>
<li>Start with the dataset</li>
<li>Filter for Adelie penguins</li>
<li>Group by island</li>
<li>Summarize body mass</li>
</ul>
</div>
<p><br></p>
</section>
<section id="common-errors-with-pipes-examples-using-flights-data" class="slide level2 center">
<h2>Common Errors with Pipes: Examples using flights data</h2>
<p><strong>We use a built-in dataset of all flights (n = 336,776) that departed from NYC in 2013.</strong></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb33-2"><a></a><span class="fu">data</span>(flights)</span>
<span id="cb33-3"><a></a><span class="fu">head</span>(flights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 19
   year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
  &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
1  2013     1     1      517            515         2      830            819
2  2013     1     1      533            529         4      850            830
3  2013     1     1      542            540         2      923            850
4  2013     1     1      544            545        -1     1004           1022
5  2013     1     1      554            600        -6      812            837
6  2013     1     1      554            558        -4      740            728
# ‚Ñπ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</section>
<section id="common-errors-with-pipes-examples-using-flights-data-1" class="slide level2 center">
<h2>Common Errors with Pipes: Examples using flights data</h2>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb35-2"><a></a><span class="fu">data</span>(flights)</span>
<span id="cb35-3"><a></a><span class="fu">glimpse</span>(flights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 336,776
Columns: 19
$ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2‚Ä¶
$ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1‚Ä¶
$ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1‚Ä¶
$ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 558, ‚Ä¶
$ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600, 600, ‚Ä¶
$ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, -2, -1‚Ä¶
$ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753, 849,‚Ä¶
$ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745, 851,‚Ä¶
$ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3, 7, -1‚Ä¶
$ carrier        &lt;chr&gt; "UA", "UA", "AA", "B6", "DL", "UA", "B6", "EV", "B6", "‚Ä¶
$ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301, 4‚Ä¶
$ tailnum        &lt;chr&gt; "N14228", "N24211", "N619AA", "N804JB", "N668DN", "N394‚Ä¶
$ origin         &lt;chr&gt; "EWR", "LGA", "JFK", "JFK", "LGA", "EWR", "EWR", "LGA",‚Ä¶
$ dest           &lt;chr&gt; "IAH", "IAH", "MIA", "BQN", "ATL", "ORD", "FLL", "IAD",‚Ä¶
$ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149, 1‚Ä¶
$ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 733, ‚Ä¶
$ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6, 6‚Ä¶
$ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 59, 0‚Ä¶
$ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-01 0‚Ä¶</code></pre>
</div>
</div>
</section>
<section id="common-pipe-errors-example-1" class="slide level2 center">
<h2>Common Pipe Errors: Example 1</h2>
<h4 id="whats-wrong-with-this-code">What‚Äôs wrong with this code?</h4>
<p>Before we debug it, let‚Äôs first think through what the code is trying to do conceptually.</p>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="invalid-code">Invalid code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a></a>  by_dest <span class="ot">&lt;-</span> <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a></a>  delay <span class="ot">&lt;-</span> <span class="fu">summarize</span>(</span>
<span id="cb37-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb37-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb37-6"><a></a>  d <span class="ot">&lt;-</span> <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="common-pipe-errors-example-1-1" class="slide level2 center">
<h2>Common Pipe Errors: Example 1</h2>
<h4 id="whats-wrong-with-this-code-1">What‚Äôs wrong with this code?</h4>
<p>Before we debug it, let‚Äôs first think through what the code is trying to do conceptually.</p>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="invalid-code-1">Invalid code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a></a>  by_dest <span class="ot">&lt;-</span> <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a></a>  delay <span class="ot">&lt;-</span> <span class="fu">summarize</span>(</span>
<span id="cb38-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb38-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-6"><a></a>  d <span class="ot">&lt;-</span> <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
<div class="smaller">
<div class="callout callout-none no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<ul>
<li>Take the <code>flights</code> dataset<br>
</li>
<li>Group flights by destination, using the variable <code>dest</code><br>
</li>
<li>Count the delayed flights and store the result in a new variable called <code>count</code><br>
</li>
<li>Calculate the average arrival delay, using <code>arr_delay</code>, and store the result in a new variable called <code>delay</code><br>
</li>
<li>Remove destinations with less than 20 flights. <em>Question:</em> Why <code>filter(count &gt; 20)</code> to remove destinations with fewer than 20 flights?</li>
</ul>
</div>
</div>
</div>
</div>
<!-- TIP FOR FALL 25: change order so this is not the first example as it is harder to read than others 

Answer to the question: filter() keeps only the rows where the condition is true. So this code keeps rows where count is greater than 20, effectively removing those with 20 or fewer. filter() doesn‚Äôt remove rows ‚Äî it keeps the ones that match your condition.

-->
</section>
<section id="common-pipe-errors-example-1-2" class="slide level2 center">
<h2>Common Pipe Errors: Example 1</h2>
<h4 id="whats-wrong-with-this-code-2">What‚Äôs wrong with this code?</h4>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="invalid-code-2">Invalid code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a></a>  by_dest <span class="ot">&lt;-</span> <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a></a>  delay <span class="ot">&lt;-</span> <span class="fu">summarize</span>(</span>
<span id="cb39-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb39-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a></a>  d <span class="ot">&lt;-</span> <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<h4 id="correct-code">Correct code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a></a>  <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span></span>
<span id="cb40-3"><a></a>  <span class="fu">summarize</span>(</span>
<span id="cb40-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb40-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb40-6"><a></a>  <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
<p><br></p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>Don‚Äôt assign anything inside a pipe. Use <code>&lt;-</code> only at the start, if you want to save the final result. Do not use it between steps.</p>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="common-pipe-errors-example-2" class="slide level2 center">
<h2>Common Pipe Errors: Example 2</h2>
<h4 id="whats-wrong-with-this-code-3">What‚Äôs wrong with this code?</h4>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="invalid-code-3">Invalid code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a></a>  <span class="fu">group_by</span>(dest)</span>
<span id="cb41-3"><a></a>  <span class="fu">summarize</span>(</span>
<span id="cb41-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb41-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb41-6"><a></a>  <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="common-pipe-errors-example-2-1" class="slide level2 center">
<h2>Common Pipe Errors: Example 2</h2>
<h4 id="whats-wrong-with-this-code-4">What‚Äôs wrong with this code?</h4>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="invalid-code-4">Invalid code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a></a>  <span class="fu">group_by</span>(dest)</span>
<span id="cb42-3"><a></a>  <span class="fu">summarize</span>(</span>
<span id="cb42-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb42-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb42-6"><a></a>  <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<h4 id="correct-code-1">Correct code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a></a>  <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a></a>  <span class="fu">summarize</span>(</span>
<span id="cb43-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb43-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a></a>  <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
<p><br></p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>Each function in a pipe chain must be connected with <code>%&gt;%</code> to keep the chain going.</p>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="common-pipe-errors-example-3" class="slide level2 center">
<h2>Common Pipe Errors: Example 3</h2>
<h4 id="whats-wrong-with-this-code-5">What‚Äôs wrong with this code?</h4>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="invalid-code-5">Invalid code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a></a>  <span class="fu">group_by</span>(<span class="at">.data =</span> flights, dest) <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a></a>  <span class="fu">summarize</span>(<span class="at">.data =</span> flights,</span>
<span id="cb44-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb44-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-6"><a></a>  <span class="fu">filter</span>(<span class="at">.data =</span> flights, count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="common-pipe-errors-example-3-1" class="slide level2 center">
<h2>Common Pipe Errors: Example 3</h2>
<h4 id="whats-wrong-with-this-code-6">What‚Äôs wrong with this code?</h4>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="invalid-code-6">Invalid code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a></a>  <span class="fu">group_by</span>(<span class="at">.data =</span> flights, dest) <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a></a>  <span class="fu">summarize</span>(<span class="at">.data =</span> flights,</span>
<span id="cb45-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb45-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-6"><a></a>  <span class="fu">filter</span>(<span class="at">.data =</span> flights, count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<h4 id="correct-code-2">Correct code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a></a>  <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a></a>  <span class="fu">summarize</span>(</span>
<span id="cb46-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb46-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb46-6"><a></a>  <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
<p><br></p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>When using pipes, only reference the data frame at the start of the chain. Do not repeat <code>.data = flights</code> in every function as <code>%&gt;%</code> automatically passes the data along.</p>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="common-pipe-errors-example-4" class="slide level2 center">
<h2>Common Pipe Errors: Example 4</h2>
<h4 id="whats-wrong-with-this-code-7">What‚Äôs wrong with this code?</h4>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="invalid-code-7">Invalid code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">+</span></span>
<span id="cb47-2"><a></a>  <span class="fu">group_by</span>(dest) <span class="sc">+</span></span>
<span id="cb47-3"><a></a>  <span class="fu">summarize</span>(</span>
<span id="cb47-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb47-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb47-6"><a></a>  <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="common-pipe-errors-example-4-1" class="slide level2 center">
<h2>Common Pipe Errors: Example 4</h2>
<h4 id="whats-wrong-with-this-code-8">What‚Äôs wrong with this code?</h4>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="invalid-code-8">Invalid code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">+</span></span>
<span id="cb48-2"><a></a>  <span class="fu">group_by</span>(dest) <span class="sc">+</span></span>
<span id="cb48-3"><a></a>  <span class="fu">summarize</span>(</span>
<span id="cb48-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb48-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb48-6"><a></a>  <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<h4 id="correct-code-3">Correct code</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a>delays <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span></span>
<span id="cb49-2"><a></a>  <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a></a>  <span class="fu">summarize</span>(</span>
<span id="cb49-4"><a></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb49-5"><a></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb49-6"><a></a>  <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
<p><br></p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>The <code>+</code> sign is only for adding layers in <code>ggplot2</code>! Don‚Äôt use it to chain <code>dplyr</code> functions: use <code>%&gt;%</code> to pipe data through a sequence of transformations.</p>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="practice-1" class="slide level2 center">
<h2>üíª Practice</h2>
<p>Download today‚Äôs in-class exercises from the website for more practice on operator, dplyr, and pipes.</p>
</section>
<section id="recap-what-we-learned-today" class="slide level2 center">
<h2>Recap: What We Learned Today</h2>
<ul>
<li>Practiced programming as problem-solving: think through tasks before coding</li>
<li>Learned R operators</li>
<li>Key <code>dplyr</code> functions like <code>filter()</code>, <code>group_by()</code>, <code>summarize()</code>, and more</li>
<li>Chained commands with pipes</li>
<li>Reviewed common mistakes when using pipes and how to avoid them</li>
</ul>
</section>
<section id="to-print-these-slides-as-pdf" class="slide level2 center">
<h2>To print these slides as pdf</h2>
<p>Click on the icon bottom-right corner &gt; Tools &gt; PDF Export Mode &gt; Print as a Pdf</p>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>