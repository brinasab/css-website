<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-4a990d8dcb58f517c7c86712b8f2ac7c.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.31">

  <meta name="author" content="Sabrina Nardin, Fall 2025">
  <title>css-website – Computing for the Social Sciences: Lecture 7</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-864c5404f4710dceefb0a9fe440f50a1.css">
  <link rel="stylesheet" href="../style/styles.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Computing for the Social Sciences: Lecture 7</h1>
  <p class="subtitle">Topics: Data Cleaning, Importing Data, Relational Data</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Sabrina Nardin, Fall 2025 
</div>
</div>
</div>

</section>
<section id="agenda" class="title-slide slide level1 center">
<h1>Agenda</h1>
<div class="agenda-list">
<ol type="1">
<li><p>Data Cleaning<br>
1.1 Renaming &amp; Recoding Variables<br>
1.2 Syntactic vs.&nbsp;Non-syntactic Variable Names<br>
1.3 Missing Data</p></li>
<li><p>Importing &amp; Exporting Data</p></li>
<li><p>Relational Data<br>
</p></li>
</ol>
</div>
<!--
<span style="font-size: 0.8em; color: #666;">These slides were last updated on October 20, 2025 </span>
-->
<p><span style="font-size: 0.8em; color: #666;"> <em>Slides last updated on <strong>October 20, 2025</strong>. Slides authored by Sabrina Nardin. AI used to polish slides style and fix typos.</em> </span></p>
<!--
To do: create 3 exam questions for today and 3 for Wed

Mention prep for exam list
1. Review class materials: slides, in-class code, readings
2. Complete HW2 (no AI)
3. Review the in-class prep questions 
4. Ask AI to generate more questions for you (but do it only after previous points, starting from this will backfire)

Add challenge on improving bar chart from scorecard -- say good thinking/problem solving prep for exam
-->
</section>

<section>
<section id="data-cleaning-renaming-recoding-variables" class="title-slide slide level1 center middle">
<h1>1.1 Data Cleaning: Renaming &amp; Recoding Variables</h1>

</section>
<section id="definitions" class="slide level2 center">
<h2>Definitions</h2>
<p><strong>Renaming</strong>: change variable names (column names)</p>
<p><strong>Recoding</strong>: change values/levels of categorical variables (column values; e.g., inside a column)</p>
</section>
<section id="uses" class="slide level2 center">
<h2>Uses</h2>
<p><strong>When might you need to rename variables or recode their values?</strong></p>
<ul>
<li>You are cleaning data
<ul>
<li>The variable name has issues: <code>Flipper Length (mm)</code> → <code>flipper_length_mm</code></li>
<li>You need to standardize values: <code>"Good"</code> and <code>"GOOD"</code> → <code>"good"</code></li>
<li>Etc.</li>
</ul></li>
<li>You are preparing data for modeling or visualization
<ul>
<li>You want to recode <code>"FEMALE"</code>/<code>"MALE"</code> to <code>0</code>/<code>1</code> for a regression model<br>
</li>
<li>Etc.</li>
</ul></li>
</ul>
</section>
<section id="we-work-with-the-penguins-raw-data" class="slide level2 center">
<h2>We work with the Penguins (raw) Data!</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co"># Load libraries and data</span></span>
<span id="cb1-2"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb1-4"><a></a><span class="fu">data</span>(penguins)</span>
<span id="cb1-5"><a></a></span>
<span id="cb1-6"><a></a><span class="co"># Explore data</span></span>
<span id="cb1-7"><a></a><span class="fu">head</span>(penguins_raw)</span>
<span id="cb1-8"><a></a><span class="fu">tail</span>(penguins_raw)</span>
<span id="cb1-9"><a></a><span class="fu">rbind</span>(<span class="fu">head</span>(penguins_raw, <span class="dv">3</span>), <span class="fu">tail</span>(penguins_raw, <span class="dv">3</span>))</span>
<span id="cb1-10"><a></a><span class="fu">glimpse</span>(penguins_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="renaming-variables-with-rename" class="slide level2 center">
<h2>Renaming Variables with rename</h2>
<p>To change variable names (column names) the most common method is <code>rename()</code></p>
<p>Change the name of the variable <code>studyName</code> to <code>study_name</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="co"># check before renaming</span></span>
<span id="cb2-2"><a></a><span class="fu">str</span>(penguins_raw)</span>
<span id="cb2-3"><a></a>penguins_raw <span class="sc">%&gt;%</span> <span class="fu">select</span>(studyName)</span>
<span id="cb2-4"><a></a></span>
<span id="cb2-5"><a></a><span class="co"># rename</span></span>
<span id="cb2-6"><a></a>penguins_raw <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">study_name =</span> studyName)   <span class="co"># new = old</span></span>
<span id="cb2-7"><a></a></span>
<span id="cb2-8"><a></a><span class="co"># remember to save to keep changes</span></span>
<span id="cb2-9"><a></a>p <span class="ot">&lt;-</span> penguins_raw <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">study_name =</span> studyName)</span>
<span id="cb2-10"><a></a>p <span class="sc">%&gt;%</span> <span class="fu">select</span>(study_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="practice-renaming-variables" class="slide level2 center">
<h2>💻 Practice Renaming Variables</h2>
<ul>
<li>Use <code>select()</code> to check the variable <code>Comments</code> in <code>penguins_raw</code></li>
<li>Use <code>rename()</code> to rename <code>Comments</code> to <code>notes</code></li>
<li>Save the result to a new object</li>
<li>Use <code>select()</code> to check again</li>
</ul>
<p>Once done, copy your code <a href="https://codeshare.io/29X3QM" target="_blank">here</a> to share it.</p>
<!--
select(penguins_raw, Comments)
penguins_raw |> rename(notes = Comments)
-->
</section>
<section id="recoding-variables-method-1-with-mutate-recode" class="slide level2 center">
<h2>Recoding Variables Method 1: with mutate + recode</h2>
<p>To change variable values (usually levels of categorical variables), we learn two methods. We take the variable <code>Sex</code> and turn MALE into 1, FEMALE into 0.</p>
<p>Method 1:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="co"># check before recoding</span></span>
<span id="cb3-2"><a></a>penguins_raw <span class="sc">%&gt;%</span> <span class="fu">count</span>(Sex)</span>
<span id="cb3-3"><a></a></span>
<span id="cb3-4"><a></a><span class="co"># mutate + recode</span></span>
<span id="cb3-5"><a></a>p <span class="ot">&lt;-</span> penguins_raw <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a></a>  <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">recode</span>(Sex, <span class="st">"MALE"</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">"FEMALE"</span> <span class="ot">=</span> <span class="dv">0</span>))</span>
<span id="cb3-7"><a></a></span>
<span id="cb3-8"><a></a><span class="co"># compare</span></span>
<span id="cb3-9"><a></a>penguins_raw <span class="sc">%&gt;%</span> <span class="fu">count</span>(Sex)</span>
<span id="cb3-10"><a></a>p <span class="sc">%&gt;%</span> <span class="fu">count</span>(Sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- Here we could have unquoted (e.g., `MALE = 1`) but only works if: 
the variable is a factor or there are no spaces or punctuation in the variable name -->
</section>
<section id="recoding-variables-method-2-with-mutate-case_when" class="slide level2 center">
<h2>Recoding Variables Method 2: with mutate + case_when</h2>
<p>Method 2:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="co"># mutate + case_when</span></span>
<span id="cb4-2"><a></a>penguins_raw <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a></a>  <span class="fu">mutate</span>(<span class="at">Sex =</span> <span class="fu">case_when</span>(Sex <span class="sc">==</span> <span class="st">"MALE"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb4-4"><a></a>                         Sex <span class="sc">==</span> <span class="st">"FEMALE"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb4-5"><a></a>                         <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span>))</span>
<span id="cb4-6"><a></a>  </span>
<span id="cb4-7"><a></a><span class="co"># like for method 1 (previous code) save results to keep changes and compare</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>With <code>case_when()</code> each <code>logical condition ~ value</code> pair acts like <em>if → then</em>:</p>
<ul>
<li>for each row, R looks if the condition is TRUE: “<em>If</em> you find the value MALE in Sex, <em>then</em> convert it to 1”</li>
<li><code>TRUE ~ NA_real_</code> tells R: “<em>If</em> no previous condition was met, <em>then</em> return NA as as a number”</li>
</ul>
</div>
</div>
</div>
</section>
<section id="practice-recoding-variables" class="slide level2 center">
<h2>💻 Practice Recoding Variables</h2>
<ul>
<li>Use <code>count()</code> to check the variable <code>Species</code> in <code>penguins_raw</code></li>
<li>Pick method 1 or method 2 to recode the values of that variable into Adelie, Chinstrap, Gentoo</li>
<li>Save the result to a new object</li>
<li>Use <code>count()</code> to verify both results</li>
</ul>
<p>Once done, copy your code <a href="https://codeshare.io/29X3QM" target="_blank">here</a> to share it.</p>
<!--

# Method 1: RECODE

penguins_raw %>% count(Species)

p <- penguins_raw %>%
  mutate(Species = recode(Species,
    "Adelie Penguin (Pygoscelis adeliae)" = "Adelie",
    "Chinstrap penguin (Pygoscelis antarctica)" = "Chinstrap",
    "Gentoo penguin (Pygoscelis papua)" = "Gentoo"
  ))

p %>% count(Species)


# Method 2: CASE_WHEN

penguins_raw %>% count(Species)

p2 <- penguins_raw %>%
  mutate(Species = case_when(
    Species == "Adelie Penguin (Pygoscelis adeliae)" ~ "Adelie",
    Species == "Chinstrap penguin (Pygoscelis antarctica)" ~ "Chinstrap",
    Species == "Gentoo penguin (Pygoscelis papua)" ~ "Gentoo",
    TRUE ~ NA_character_
  ))

p2 %>% count(Species)

-->
</section>
<section id="the-role-of-mutate-in-recoding" class="slide level2 center">
<h2>The Role of mutate in Recoding</h2>
<h3 id="the-dplry-verb-mutate-has-many-uses-create-new-columns-or-modify-existing-columns-values.">The dplry verb mutate has many uses: create new columns or modify existing columns values.</h3>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>For recoding, we use <code>mutate + recode</code> or <code>mutate + case_when</code>, because our first goal is changing the <em>column’s values</em>:</p>
<ul>
<li>Method 1: <code>mutate(Sex = recode(Sex, "MALE" = 1, "FEMALE" = 0))</code><br>
</li>
<li>Method 2: <code>mutate(Sex = case_when(sex == "MALE" ~ 1, sex == "FEMALE" ~ 0))</code></li>
</ul>
</div>
</div>
</div>
</section>
<section id="rename-vs-recode-syntax-reference" class="slide level2 center">
<h2>Rename vs Recode: Syntax Reference</h2>
<!--
DOUBLE CHECK TIPS WITH REAL R CODE
| Function       | What It Changes    | Syntax + Example                                                | Tips                                                             |
|----------------|--------------------|------------------------------------------------------------------|------------------------------------------------------------------|
| `rename()`     | Column names       | `rename(new_name = old_name)`  <br> `rename(notes = Comments)` | No quotes around variable names                                  |
| `recode()`     | Column values      | `recode(variable, "old" = new)`  <br> `recode(Sex, "MALE" = 1)` | Use quotes around variable values if they are character             |
| `case_when()`  | Column values      | `case_when(variable == "old" ~ new)` <br> `case_when(Sex == "MALE" ~ 1)` | Use quotes around variable values if they are character |
-->
<table class="caption-top">
<colgroup>
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 39%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>What It Changes</th>
<th>Syntax + Example</th>
<th>Tips</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>rename()</code></td>
<td>Column names</td>
<td><code>rename(new_name = old_name)</code> <br> <code>rename(notes = Comments)</code></td>
<td>No quotes around variable names</td>
</tr>
<tr class="even">
<td><code>recode()</code></td>
<td>Column values</td>
<td><code>recode(variable, "old" = new)</code> <br> <code>recode(Sex, "MALE" = 1)</code></td>
<td>Check function doc to see when quotes are needed</td>
</tr>
<tr class="odd">
<td><code>case_when()</code></td>
<td>Column values</td>
<td><code>case_when(variable == "old" ~ new)</code> <br> <code>case_when(Sex == "MALE" ~ 1)</code></td>
<td>Check function doc to see when quotes are needed</td>
</tr>
</tbody>
</table>
</section></section>
<section>
<section id="data-cleaning-syntactic-vs.-non-syntactic-variable-names" class="title-slide slide level1 center middle">
<h1>1.2 Data Cleaning: Syntactic vs.&nbsp;Non-syntactic Variable Names</h1>

</section>
<section id="syntactic-valid-variable-names-in-r" class="slide level2 center">
<h2>Syntactic (Valid) Variable Names in R</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="valid-names-in-r">Valid Names in R:</h3>
<ul>
<li>Use letters, numbers, and the symbols <code>.</code> or <code>_</code></li>
<li>But cannot start with a number or symbol</li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="examples-of-valid-names">Examples of Valid Names:</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>flipper_length_mm</span>
<span id="cb5-2"><a></a>flipper.length.mm</span>
<span id="cb5-3"><a></a>flipper.length_mm     <span class="co"># valid but poor style</span></span>
<span id="cb5-4"><a></a>FlipperLengthMm       <span class="co"># valid but poor style</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="non-syntactic-invalid-variable-names-in-r" class="slide level2 center">
<h2>Non-Syntactic (Invalid) Variable Names in R</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="what-makes-a-name-invalid">What Makes a Name Invalid:</h3>
<ul>
<li>Contains spaces or symbols</li>
<li>Starts with a number or symbol</li>
<li>Uses reserved words (e.g., <code>TRUE</code>, <code>NULL</code>, <code>if</code>, <code>function</code>)</li>
<li>Type <code>?Reserved</code> in the Console for the full list</li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="examples-of-invalid-names">Examples of Invalid Names:</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>Flipper <span class="fu">Length</span> (mm)</span>
<span id="cb6-2"><a></a><span class="sc">@</span>_flipper_length_mm</span>
<span id="cb6-3"><a></a>flipper_ length_mm</span>
<span id="cb6-4"><a></a>flipper<span class="sc">-</span>length<span class="sc">-</span>mm</span>
<span id="cb6-5"><a></a>.flipper.length.mm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="practice-syntactic-and-non-syntactic-names" class="slide level2 center">
<h2>💻 Practice: Syntactic and Non-Syntactic Names</h2>
<p>Which of the following are valid names?</p>
<ul>
<li><code>3_religion</code></li>
<li><code>#3_religion</code></li>
<li><code>q3_religion</code></li>
<li><code>q3.religion</code></li>
<li><code>q3-religion</code></li>
<li><code>q3 religion</code></li>
<li><code>TRUE</code></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>For best coding style, use snake_case for all your variables names and keep them to three words maximum. Example: <code>q3_religion</code> <!-- Check using `make.names()` in R or try using them in a `select()` call. --></p>
</div>
</div>
</div>
</section>
<section id="how-to-handle-non-syntactic-names-and-why-it-matters" class="slide level2 center">
<h2>How to Handle Non-syntactic Names, and Why It Matters</h2>
<p><strong>You should avoid creating non-syntactic names</strong>, BUT you’ll often encounter them, especially in datasets not created in R (Excel or other sources). If you don’t handle them properly, R will throw errors when you try to use them.</p>
<h4 id="what-to-do">What to Do:</h4>
<p><strong>1. Use backticks to refer to them (e.g., <code>`Flipper Length (mm)`</code>)</strong><br>
<strong>2. Use <code>rename()</code> to change them to syntactic names</strong></p>
<p><em>Non-syntactic names will break code if you forget to wrape them in backticks, so renaming avoids issues.</em></p>
</section>
<section id="working-with-non-syntactic-names-in-practice" class="slide level2 center">
<h2>Working with Non-syntactic Names in Practice</h2>
<p>Imagine you are working on political ideology by country, assembled by someone else. The data are in Excel and when you imported them in R they look like this:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">country =</span> <span class="fu">c</span>(<span class="st">"Italy"</span>, <span class="st">"Germany"</span>, <span class="st">"France"</span>, <span class="st">"Italy"</span>, <span class="st">"United States"</span>),</span>
<span id="cb7-2"><a></a>                  <span class="st">`</span><span class="at">4 ideology</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"communism"</span>, <span class="st">"fascism"</span>, <span class="st">"anarchism"</span>, <span class="st">"fascism"</span>, <span class="st">"capitalism"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
<p>To use the non-syntactic variable name without changing it and without errors, you must use backticks:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a><span class="fu">select</span>(df, <span class="st">`</span><span class="at">4 ideology</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section>
<section id="practice-syntactic-non-syntactic-variable-names" class="slide level2 center">
<h2>💻 Practice: Syntactic &amp; Non-Syntactic Variable Names</h2>
<p>Try this in R:</p>
<ul>
<li>Use <code>glimpse(penguins_raw)</code> or <code>str(penguins_raw)</code> and identify non-syntactic variables names in this raw dataset</li>
<li>Pick one of them, and try accessing it with <code>select()</code> without backticks: what happens?</li>
<li>Use <code>rename()</code> to give the variable a syntactic valid name</li>
<li>Save the result to a new object</li>
<li>Verify the name was changed and you can now access it</li>
</ul>
<p>Once done, copy your code <a href="https://codeshare.io/29X3QM" target="_blank">here</a> to share it.</p>
<!--

glimpse(penguins_raw)
select(penguins_raw, `Flipper Length (mm)`)
x <- rename(penguins_raw, flipper_length_mm = `Flipper Length (mm)`)
glimpse(x)


# 1.
select(df, 4 ideology)
select(df, "4 ideology")
# 2. 
rename(df, ideology = `4 ideology`)
-->
</section></section>
<section>
<section id="data-cleaning-missing-data" class="title-slide slide level1 center middle">
<h1>1.3 Data Cleaning: Missing Data</h1>

</section>
<section id="what-are-missing-data" class="slide level2 center">
<h2>What Are Missing Data?</h2>
<p>R distinguishes two types of missing data:</p>
<ul>
<li><strong>Explicit missing data</strong>: visible <code>NA</code> or <code>NaN</code> values in the dataset</li>
<li><strong>Implicit missing data</strong>: data that was never recorded</li>
</ul>
<p>In this course, we focus on <strong>explicit missing data</strong>. For implicit missing data, see <a href="https://r4ds.hadley.nz/missing-values">R for Data Science Chapter 18</a></p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Explicit = value is missing as <code>NA</code> (Not Available) or <code>NaN</code> (Not a Number)<br>
Implicit = value was never recorded (row or cell is absent)</p>
</div>
</div>
</div>
<!--
- `NA` = Not Available (general-purpose missing value)  
- `NaN` = Not a Number (typically from invalid math like `0/0` or `0 * Inf`)  
- Both behave similarly, but `NaN` specifically signals a **computational error**
See [Ch. 12.2.2](https://r4ds.hadley.nz/logicals#sec-na-comparison) for how `NA` behaves in comparisons.
:::
-->
</section>
<section id="how-missing-data-behave" class="slide level2 center">
<h2>How Missing Data Behave</h2>
<p>Any operation involving a missing value will also return a missing value (see <a href="https://r4ds.hadley.nz/logicals#sec-na-comparison">Chapter 12.2.2 Missing values</a> for more):</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="cn">NA</span> <span class="sc">&gt;</span> <span class="dv">5</span></span>
<span id="cb9-2"><a></a></span>
<span id="cb9-3"><a></a><span class="fu">sum</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="cn">NA</span>)</span>
<span id="cb9-4"><a></a><span class="fu">sum</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="cn">NA</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-5"><a></a></span>
<span id="cb9-6"><a></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="cn">NA</span>))</span>
<span id="cb9-7"><a></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="cn">NA</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="common-ways-to-handle-missing-data" class="slide level2 center">
<h2>Common Ways to Handle Missing Data</h2>
<p>We’ll review three main tools:</p>
<p>A. <code>is.na()</code> – to detect missing values<br>
B. <code>na.rm = TRUE</code> – to ignore missing values<br>
C. <code>drop_na()</code> – to remove missing values</p>
<!-- All are for working with **explicit** missing values -->
</section>
<section id="a.-detect-missing-data-with-is.na" class="slide level2 center">
<h2>A. Detect Missing Data with is.na():</h2>
<p><strong>Use <code>is.na()</code> to find the missing values in a specific variable.</strong> It returns <code>TRUE</code> for missing values, and <code>FALSE</code> otherwise.</p>
<p>Check for missing values in the <code>penguins_raw</code> dataset:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="co"># using base R syntax</span></span>
<span id="cb10-2"><a></a><span class="fu">sum</span>(<span class="fu">is.na</span>(penguins_raw<span class="sc">$</span>Sex))</span>
<span id="cb10-3"><a></a><span class="fu">table</span>(<span class="fu">is.na</span>(penguins_raw<span class="sc">$</span>Sex))</span>
<span id="cb10-4"><a></a></span>
<span id="cb10-5"><a></a><span class="co"># using tidyverse syntax</span></span>
<span id="cb10-6"><a></a>penguins_raw <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="fu">sum</span>(<span class="fu">is.na</span>(Sex)))</span>
<span id="cb10-7"><a></a>penguins_raw  <span class="sc">%&gt;%</span> <span class="fu">count</span>(<span class="fu">is.na</span>(Sex)) </span>
<span id="cb10-8"><a></a></span>
<span id="cb10-9"><a></a><span class="co"># keep rows where sex is missing</span></span>
<span id="cb10-10"><a></a><span class="fu">filter</span>(penguins_raw, <span class="fu">is.na</span>(Sex))    <span class="co"># correct  </span></span>
<span id="cb10-11"><a></a><span class="fu">filter</span>(penguins_raw, Sex <span class="sc">==</span> <span class="cn">NA</span>)     <span class="co"># incorrect</span></span>
<span id="cb10-12"><a></a></span>
<span id="cb10-13"><a></a><span class="co"># keep rows where sex is NOT missing</span></span>
<span id="cb10-14"><a></a><span class="fu">filter</span>(penguins_raw, <span class="sc">!</span><span class="fu">is.na</span>(sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- spend time on this code, add variable names, change df order, etc. -->
</section>
<section id="b.-ignore-missing-data-with-na.rm-true" class="slide level2 center">
<h2>B. Ignore Missing Data with na.rm = TRUE</h2>
<p><strong>Use <code>na.rm = TRUE</code> to exclude missing values when performing calculations.</strong> Often used with <code>summarize()</code> when calculating things like mean, sum, standard deviation.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>penguins_raw <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">avg_mass =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb11-2"><a></a>penguins_raw <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sum_mass =</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- show the difference with and without the na.rm = TRUE and try change it to FALSE-->
<p><br></p>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>The command <code>na.rm = TRUE</code> does not remove missing data from the variable(s), it just skips them for that operation, but they are not dropped!</p>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="c.-remove-missing-data-with-drop_na" class="slide level2 center">
<h2>C. Remove Missing Data with drop_na()</h2>
<p><strong>Use <code>drop_na()</code> to remove rows with missing values.</strong> Either across all columns or in a specific column.</p>
<p>Drop missing values in one specific column (preferred):</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>penguins_raw <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a></a>  <span class="fu">drop_na</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a></a>  <span class="fu">summarize</span>(<span class="at">avg_mass =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- show you can drop_na() all or you can add more variables like 
drop_na(`Body Mass (g)`, Sex) etc. -->
<p><br></p>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>Be careful with <code>drop_na()</code> as it removes entire rows, which may unintentionally filter out relevant data. Check which variable(s) you are dropping, and avoid using it blindly across all columns.</p>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="practice-handling-missing-data" class="slide level2 center">
<h2>💻 Practice: Handling Missing Data</h2>
<ol start="0" type="1">
<li><strong>Rename:</strong> use the <code>penguins_raw</code> dataset and rename <code>Flipper Length (mm)</code> to <code>flipper_length_mm</code>. Save the result as a new dataframe, e.g., <code>penguins_clean</code> or <code>p</code></li>
</ol>
<p>Use the new dataframe with the renamed variable for the tasks below:</p>
<ol type="1">
<li><p><strong>Detect missing values:</strong> use <code>is.na()</code> and <code>sum()</code> to count how many are missing in the variable flipper length</p></li>
<li><p><strong>Exclude missing from calculations:</strong> use <code>na.rm = TRUE</code> inside <code>mean()</code> to calculate the average flipper length</p></li>
<li><p><strong>Drop missing values:</strong> use <code>drop_na()</code> to remove rows with missing values in flipper length</p></li>
</ol>
<p>Once done, <a href="https://codeshare.io/29X3QM" target="_blank">share your code here</a>.</p>
<!--
# 0. Rename
p <- penguins_raw %>% rename(flipper_length_mm = `Flipper Length (mm)`)

# 1. Detect missing values
p %>% summarize(n_missing = sum(is.na(flipper_length_mm)))

# 2. Exclude missing values from calculation
p %>% summarize(avg_flipper = mean(flipper_length_mm, na.rm = TRUE))

# 3. Drop missing values and calculate again
p %>% drop_na(flipper_length_mm)
-->
</section>
<section id="ways-to-fill-or-replace-missing-data" class="slide level2 center">
<h2>Ways to Fill or Replace Missing Data</h2>
<p>Main functions to replace or fill missing values:</p>
<ul>
<li><code>replace_na()</code> – replace missing values with a specified value<br>
</li>
<li><code>fill()</code> – carry values forward or backward (from the package <code>tidyr</code>)<br>
</li>
<li><code>coalesce()</code> – return the first non-missing value across multiple columns</li>
</ul>
<p>See <a href="https://r4ds.hadley.nz/missing-values">Chapter 18</a> of <em>R for Data Science</em> for more.</p>
<!-- NOTE: REMOVE THIS PART FOR CSP, KEEP FOR CSS 
ALSO EXPAND THE EXAMPLE ON HOW TO REPLACE OR REFILL MISSING DATA

## Factors and Empty Groups

Example from [Chapter 18](https://r4ds.hadley.nz/missing-values) of *R for Data Science*.

Create a dataset with with one variable defined as factor with two levels (yes and no):

```r
health <- tibble(
  name   = c("Ikaia", "Oletta", "Leriah", "Dashay", "Tresaun"),
  smoker = factor(c("no", "no", "no", "no", "no"), levels = c("yes", "no")),
  age    = c(34, 88, 75, 47, 56)
)
health
```

---

## Counting with Dropped vs. Retained Factor Levels

Without `.drop = FALSE`, unobserved factor levels are excluded:

```r
health |> count(smoker)
```

With `.drop = FALSE`, all factor levels are preserved (keeps all groups, even those not observed in the data since here they are all non-smokers)

```r
health |> count(smoker, .drop = FALSE)
```

---

## This Matters for Plotting

Compare these two codes.

The default behavior excludes empty levels from the plot:
```r
ggplot(health, aes(x = smoker)) +
  geom_bar() +
  scale_x_discrete()
```

Force display of all factor levels, including empty ones:
```r
ggplot(health, aes(x = smoker)) +
  geom_bar() +
  scale_x_discrete(drop = FALSE)
```
-->
</section></section>
<section>
<section id="importing-exporting-data" class="title-slide slide level1 center middle">
<h1>2. Importing &amp; Exporting Data</h1>

</section>
<section id="importing-csv-files" class="slide level2 center">
<h2>Importing CSV files</h2>
<p>To load data into R we need <strong>importing functions</strong>. There are several of them depending on the <strong>type of file</strong> we want to import. See “R for Data Science” 2nd Ed. Chapter 7 for details.</p>
<p><strong>The most common importing functions read comma-separated values (csv) files.</strong> Two main versions:</p>
<ul>
<li>from <strong>base-R</strong> we have <code>read.csv()</code></li>
<li>from <strong><a href="https://readr.tidyverse.org/"><code>readr</code></a></strong> we have <code>read_csv()</code></li>
</ul>
<p>They are similar, but we use <code>read_csv()</code> in this course because is more recent, faster, and does not automatically changes data types (e.g., does not convert characters into factors automatically). Type <code>?read.csv()</code> and <code>?read_csv()</code> in your Console for info.</p>
<!-- `read.csv` is a special case of `read.table`, while `read_csv` is special case of `read_delim`. Look them up to check the differences -- r 
difference between using one ? and ?? in searching for doc
the ? find the exact match
the ?? finds the general match
-->
</section>
<section id="the-function-read_csv" class="slide level2 center">
<h2>The function read_csv()</h2>
<p>This function takes several arguments, all listed in the <a href="https://readr.tidyverse.org/reference/read_delim.html">documentation</a>. Some of the most common arguments are:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a><span class="fu">read_csv</span>(file, <span class="at">col_names =</span> <span class="cn">TRUE</span>, <span class="at">col_types =</span> <span class="cn">NULL</span>, <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"NA"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>The <code>file</code> argument must always be passed, the other arguments can be left as default:</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="fu">library</span>(readr)</span>
<span id="cb14-2"><a></a></span>
<span id="cb14-3"><a></a><span class="co"># load data into my local R Studio, specifying the path</span></span>
<span id="cb14-4"><a></a><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"/Users/Sabrina Nardin/Desktop/testdata.csv"</span>)</span>
<span id="cb14-5"><a></a></span>
<span id="cb14-6"><a></a><span class="co"># load data into my Workbench, specifying the path</span></span>
<span id="cb14-7"><a></a><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"/home/nardin/testdata.csv"</span>)</span>
<span id="cb14-8"><a></a></span>
<span id="cb14-9"><a></a><span class="co"># load data (local R Studio or Workbench) without specifying the path </span></span>
<span id="cb14-10"><a></a><span class="co"># where does R look for this file?</span></span>
<span id="cb14-11"><a></a><span class="fu">read_csv</span>(<span class="st">"testdata.csv"</span>)</span>
<span id="cb14-12"><a></a></span>
<span id="cb14-13"><a></a><span class="co"># load data if you are not sure where it is located (not reccomended)</span></span>
<span id="cb14-14"><a></a><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="fu">file.choose</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!--
Make sure the file is located in the given path and you are typing the path correctly. Let's practice!
-->
</section>
<section id="practice-load-data-in-r" class="slide level2 center">
<h2>💻 Practice: Load Data in R</h2>
<ol type="1">
<li><p>Create a <code>testdata.csv</code> file with four columns (id, name, age, food) with different data types and some missing data. Save it on your desktop with a <code>csv</code> extension.</p></li>
<li><p>Open Workbench: upload the file to the server. Skip this step if you are using R on your machine.</p></li>
<li><p>Look at your current working directory by typing <code>getwd()</code> in the console. That’s where R looks at files by default.</p></li>
<li><p>Load <code>library(tidyverse)</code> and import the data into R using <code>read_csv()</code>. If you do not provide a path, R looks in your working directory.</p></li>
</ol>
</section>
<section class="slide level2 center">

<h3 id="changing-default-arguments">Changing Default Arguments</h3>
<p>In the next slides, we are going to modify some of the most common arguments of the <code>read_csv()</code> function.</p>
<p>Let’s start by using the function without modifying them, by simply typing <code>read_csv(file = "testdata.csv")</code></p>
<p>What do you notice?</p>
<!--
This file is a good example of messy data!
type of column is shown at the top, e.g. id is double, name is char, but so is age, which should not be. Why so? the "na" is interpret as a character rather than missing data and all column values are forced to character.
-->
</section>
<section class="slide level2 center">

<h3 id="modify-the-col_types-argument">Modify the col_types argument</h3>
<p>The default is <code>read_csv(file, col_types = NULL)</code>. We can change it to manually set the column types, as shown below (two options):</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="co"># option 1</span></span>
<span id="cb15-2"><a></a><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"testdata.csv"</span>,</span>
<span id="cb15-3"><a></a>         <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">id =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb15-4"><a></a>                          <span class="at">name =</span> <span class="fu">col_character</span>(),</span>
<span id="cb15-5"><a></a>                          <span class="at">age =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb15-6"><a></a>                          <span class="at">food =</span> <span class="fu">col_character</span>()))</span>
<span id="cb15-7"><a></a><span class="co"># option 2</span></span>
<span id="cb15-8"><a></a><span class="fu">read_csv</span>(<span class="st">"testdata.csv"</span>, <span class="at">col_types =</span> (<span class="st">"icic"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Pick one option, and run the code in your Console to re-import the data. What do you notice?</p>
<!-- all columns types have been converted to the datatype we specified. R is also guessing that the na in age is actually missing data and so converts it as such, but we get a warning message; type problems() to see more
-->
</section>
<section class="slide level2 center">

<h3 id="modify-the-na-argument">Modify the na argument</h3>
<p>The default is <code>read_csv(file, na = c("", "NA"))</code>. We can change it to add more missing data options, like that:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="fu">read_csv</span>(<span class="st">"testdata.csv"</span>, <span class="at">col_types =</span> (<span class="st">"icic"</span>), <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"NA"</span>, <span class="st">"na"</span>, <span class="st">"None"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>What do you notice? You can customize what goes into the vector <code>c()</code></p>
<!-- we can enlarge the set of missing data to include everything we want -->
</section>
<section class="slide level2 center">

<h3 id="modify-the-col_names-argument">Modify the col_names argument</h3>
<p>The default is <code>read_csv(file, col_names = TRUE)</code>. We can change it to <code>col_names = FALSE</code>, like that:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"testdata.csv"</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>What do you notice?</p>
<!-- first line is not more read as variable names -->
</section>
<section class="slide level2 center">

<h3 id="modify-the-skip-argument">Modify the skip argument</h3>
<p>The default is <code>read_csv(file, skip = 0)</code>. We can change it to <code>skip = 2</code> or any to any other integer.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"testdata.csv"</span>, <span class="at">skip =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>What do you notice?</p>
<p>Useful when your data contain problematic rows. Note that <code>read.csv()</code> (base R) doesn’t support this option. If skipping lines doesn’t work, make sure you’re using <code>read_csv()</code> from <code>readr</code></p>
</section>
<section id="takehome" class="slide level2 center">
<h2>Takehome</h2>
<p>Importing files correctly is important as it prevents problems that might emerge later!</p>
<p>Check the function arguments: there are many of them available that can help you accomplish almost anything you need!</p>
<p><em>Let’s clarify a few additional concepts related to importing and exporting data…</em></p>
</section>
<section id="working-directory" class="slide level2 center">
<h2>Working Directory</h2>
<p>The working directory is the folder that R takes as <strong>default directory</strong> every time you try to load a file, script, etc.</p>
<p>To check your current working directory: start a new session of R and type <code>getwd()</code>. In Workbench it should be <code>"/home/your_cnetid"</code></p>
</section>
<section id="relative-path-vs.-absolute-path" class="slide level2 center">
<h2>Relative Path vs.&nbsp;Absolute Path</h2>
<p>When you import a file (for example, from the <em>Workbench “Files” tab</em>) into R, you should use a <strong>relative path</strong> instead of a <strong>full (absolute) path</strong>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="relative-path">Relative Path</h3>
<ul>
<li>Means relative to your R project folder (the one containing your <code>.Rproj</code> file)<br>
</li>
<li>Recommended approach: easier and makes your code portable<br>
</li>
<li>Works only if the file is inside R’s default working directory</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a><span class="fu">read_csv</span>(<span class="st">"testdata.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:50%;">
<h3 id="absolute-path">Absolute Path</h3>
<ul>
<li>Means you specify the entire path to reach the file, independent from specific folders<br>
</li>
<li>Avoid this: it breaks if someone runs your code from another machine or folder<br>
</li>
<li>Independent on R’s default working directory</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="fu">read_csv</span>(<span class="st">"/home/nardin/testdata.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<!--
You can also manually set your directory to an absolute path, for example using `setwd()` but that is not the best approach for reproducible. Use relative paths instead!
-->
</section>
<section id="easier-solution-use-rstudio-projects" class="slide level2 center">
<h2>Easier Solution: Use RStudio Projects</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>RStudio Projects <code>.Rproj</code></strong></p>
</div>
<div class="callout-content">
<p>RStudio Projects automatically set the working directory for you, based on the active project:</p>
<ul>
<li>ensures portability across computers and a reliable behavior!</li>
<li>you do not need to set the working directory manually</li>
<li>but you need to check in which project you are working</li>
</ul>
</div>
</div>
</div>
<p><strong>Example:</strong> Each <em>homework</em> and <em>in-class exercise</em> folder in this course contains a <code>.Rproj</code> file. When you open that project in RStudio, the working directory is automatically set to that folder.</p>
<p><strong>Tip:</strong> If you switch to another project, RStudio automatically updates the default working directory for you. Always check which project you’re working in.</p>
<!-- for HW3, released tmr, we are asking to load data, we will be giving you a rproj like in HW2, so all you have to do to load teh data is to be in the correct project and then use a relative path with the name of the data.csv
-->
</section>
<section id="practice-create-an-rstudio-project" class="slide level2 center">
<h2>💻 Practice: Create an RStudio Project</h2>
<p>Step 1: Open RStudio and navigate to the top-left menu. Then File &gt; New Project…</p>
<p>Step 2: Choose New Directory, then select New Project</p>
<p>Step 3: Name your project and save it.</p>
<p>Step 4: Click Create Project. RStudio will open a new session within your project environment. Done!</p>
<p>Step 5: Let’s test it! In your new project, create a new R script or R Markdown document and inside it type and run <code>getwd()</code>. What do you notice?</p>
</section>
<section id="other-readr-functions-to-import-data" class="slide level2 center">
<h2>Other readr functions to import data</h2>
<p>The <code>readr</code> package include several functions to load into R almost all possible file formats that you might encounter (when given an option though, choose a <code>csv</code> over other formats).</p>
<p>For example:</p>
<ul>
<li><strong>Comma separated csv</strong> use <code>read_csv()</code> from the <code>readr</code> package</li>
<li><strong>Semi column separated csv</strong> use <code>read_csv2()</code>from the <code>readr</code> package</li>
<li><strong>Tab separated files</strong> use <code>read_tsv()</code>from the <code>readr</code> package</li>
<li><strong>RDS</strong> use <code>readRDS()</code> or <code>read_rds()</code></li>
<li><strong>Excel</strong> use <code>read_excel()</code> from the <code>readxl</code> package</li>
<li><strong>SAS/SPSS/Stata</strong> use the <code>haven</code> package (several functions)</li>
</ul>
<p>Cheat Sheet for <code>readr</code>: <strong>Help &gt; Cheat Sheets &gt; Browse Cheat Sheets</strong></p>
</section>
<section id="using-haven-with-sas" class="slide level2 center">
<h2>Using haven with SAS</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a><span class="fu">library</span>(haven)</span>
<span id="cb21-2"><a></a></span>
<span id="cb21-3"><a></a><span class="fu">read_sas</span>(<span class="at">data_file =</span> <span class="fu">system.file</span>(<span class="st">"examples"</span>, <span class="st">"iris.sas7bdat"</span>,</span>
<span id="cb21-4"><a></a>  <span class="at">package =</span> <span class="st">"haven"</span></span>
<span id="cb21-5"><a></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="using-haven-with-spss" class="slide level2 center">
<h2>Using haven with SPSS</h2>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a><span class="fu">read_sav</span>(<span class="at">file =</span> <span class="fu">system.file</span>(<span class="st">"examples"</span>, <span class="st">"iris.sav"</span>,</span>
<span id="cb22-2"><a></a>  <span class="at">package =</span> <span class="st">"haven"</span></span>
<span id="cb22-3"><a></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="using-haven-with-stata" class="slide level2 center">
<h2>Using haven with Stata</h2>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a><span class="fu">read_dta</span>(<span class="at">file =</span> <span class="fu">system.file</span>(<span class="st">"examples"</span>, <span class="st">"iris.dta"</span>,</span>
<span id="cb23-2"><a></a>  <span class="at">package =</span> <span class="st">"haven"</span></span>
<span id="cb23-3"><a></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="exporting-data-with-write_csv" class="slide level2 center">
<h2>Exporting data with write_csv()</h2>
<p>So far we talked about <strong>IMPORTING DATA</strong> with <code>read_csv()</code> from <code>readr</code></p>
<p>But<code>readr</code> has also several functions for <strong>EXPORTING DATA</strong>. The most common is <code>write_csv()</code> which <strong>generates csv files from R data frames</strong>: https://readr.tidyverse.org/reference/write_delim.html</p>
<pre><code># import
test &lt;- read_csv("testdata.csv", col_types = ("icic"), na = c("", "NA", "na", "None"))

# write your data analysis and visualization code etc.

# export 
write_csv(test, file = "testdata_cleaned.csv")</code></pre>
</section></section>
<section>
<section id="relational-data-with-dplyr" class="title-slide slide level1 center middle">
<h1>3. Relational Data with dplyr</h1>

</section>
<section id="definition-of-relational-data" class="slide level2 center">
<h2>Definition of Relational Data</h2>
<p><strong>Relational Database:</strong> set of multiple “tables” that are linked based on data common to them. You can think of a “table” as a dataframe.</p>
<p><strong>These tables provide meaningful insights only when combined together!</strong></p>
<p>Answers to research questions are not defined by individual rows or columns in a single table; rather, they emerge from the relationships among tables.</p>
<!--
why you want to do so? e.g. store data in different tables?
Data you need for the analysis is not and cannot be stored in one single table but it is split across tables; usually two but potentially more
-->
</section>
<section id="our-focus" class="slide level2 center">
<h2>Our Focus</h2>
<p>There are several software and languages to deal with relational databases. The most common is SQL but that’s beyond our course. For more on this, see <a href="https://r4ds.hadley.nz/databases">“Chapter 21 Databases”</a> from our book.</p>
<p><strong>R also allows you to join tables using the <code>dplyr</code> package. That’s our focus!</strong></p>
<!-- dplyr for relational data focuses on joining tables; it is basically merging data and no really needing sql terminology and concepts (e.g., table, attributes, relations) but there is value in using them, as explained in the assigned readings from today, which is Ch 19 joins from the book

So we do a mini theoretical intro to relational databases logic and terminology and then we move to dplyr
-->
</section>
<section id="we-use-the-flights-example-from-the-readings" class="slide level2 center">
<h2>We use the flights example from the readings</h2>
<p><code>library(nycflights13)</code> in <a href="https://r4ds.hadley.nz/joins">“Chapter 19 Joins”</a> from “R for Data Science” 2nd Edition.</p>
<p>We have five tables (e.g., five distinct datasets):</p>
<ul>
<li><code>flights</code> info about flights, identified by multiple variables<br>
</li>
<li><code>airlines</code> each airplane company name, identified by the abbreviated <code>career</code> code<br>
</li>
<li><code>airports</code> info about each airport, identified by the <code>faa</code> code<br>
</li>
<li><code>planes</code> info about each plane, identified by its <code>tailnum</code> number<br>
</li>
<li><code>weather</code> info about the weather at each NYC airport for each hour, identified by various variables</li>
</ul>
<p>Load the data into R (package already installed on Workbench): <code>library(nycflights13)</code></p>
</section>
<section id="we-use-the-flights-example-from-the-readings-1" class="slide level2 center">
<h2>We use the flights example from the Readings</h2>
<p>Visual representation of the relations among the 5 tables in <code>nycflights13</code>:</p>

<img data-src="07-pics/relational-nycflights.png" style="width:60.0%" class="r-stretch"><p>To understand diagrams like this, remember that each relation concerns a <strong>pair of tables</strong>.</p>
</section>
<section class="slide level2 center">

<h3 id="formal-definitions">Formal definitions</h3>
<p>A <strong>KEY</strong> of a table is a one or a subset of columns (formally called “attributes”). Two types of keys:</p>
<ul>
<li><p><strong>PRIMARY KEY</strong> uniquely identifies an observation in its own table; e.g., <code>tailnum</code> is the primary key of the <code>planes</code> table; a primary key can be one or multiple columns.</p></li>
<li><p><strong>FOREIGN KEY</strong> matches the primary key of another table; e.g., <code>tailnum</code> is a foreign key in the <code>flights</code> table (it links each flight to a unique plane by matching the tantalum primary key from the planes table</p></li>
</ul>
<!--
A variable can be both a primary key and a foreign key. For example, origin is part of the weather primary key, and is also a foreign key for the airports table. 
-->
<p>A <strong>RELATION</strong> is defined between <strong>pairs of tables</strong>: primary key + foreign key in another table.</p>
<!--
Relations can be
* one-to-one
* one-to-many: each flight has one plane, but each plane has many flights
* many-to-many
-->
</section>
<section id="in-pratice-when-using-dplyr-to-work-with-relational-data-we-have" class="slide level2 center">
<h2>In pratice… when using dplyr to work with relational data, we have:</h2>
<h3 id="mutating-joins">1. Mutating joins</h3>
<h3 id="filtering-joins">2. Filtering joins</h3>
</section>
<section id="mutating-joins-1" class="slide level2 center">
<h2>1. Mutating joins</h2>
<p>This group includes:</p>
<ul>
<li><p><strong>inner join</strong>: keeps observations that appear in both tables</p></li>
<li><p><strong>outer join</strong>: keeps observations that appear in at least one of the tables</p>
<ul>
<li><strong>left join</strong>: keeps all observations in left table<br>
</li>
<li><strong>right join</strong>: keeps all observations in right table<br>
</li>
<li><strong>full join</strong>: keeps all observations</li>
</ul></li>
</ul>
</section>
<section id="inner_join" class="slide level2 center">
<h2>inner_join()</h2>
<p>Keeps obs. that appear in both tables, identified by keys (colored numbers). Unmatched rows are dropped.</p>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="07-pics/join-setup.png" style="width:90.0%"></p>
</div><div class="column" style="width:55%;">
<p><br> <br> <img data-src="07-pics/join-inner.png" style="width:100.0%"> <br> <br></p>
</div></div>
<p><br></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a><span class="co"># inner_join example</span></span>
<span id="cb25-2"><a></a><span class="fu">inner_join</span>(x, y, <span class="at">by =</span> <span class="st">"key"</span>)</span>
<span id="cb25-3"><a></a></span>
<span id="cb25-4"><a></a><span class="co"># with pipes</span></span>
<span id="cb25-5"><a></a>x <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(y, <span class="at">by =</span> <span class="st">"key"</span>)</span>
<span id="cb25-6"><a></a></span>
<span id="cb25-7"><a></a><span class="co"># if the join columns have different names</span></span>
<span id="cb25-8"><a></a><span class="fu">inner_join</span>(x, y, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"a"</span> <span class="ot">=</span> <span class="st">"b"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
<!-- by convention, x is assigned as the first dataframe or left one, and y as the second or right one; 

the by argument specifies that we are joining it based on the key column (which you cannot see from the slide but its the column name of the colored columns in each x and y). Compare this to the left_join() operation which is another form of mutating join
-->
</section>
<section id="left_join" class="slide level2 center">
<h2>left_join()</h2>
<p>Keeps all obs. in the left table (x), even if there is not a match in the right table (y).</p>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="07-pics/join-setup.png" style="width:90.0%"></p>
</div><div class="column" style="width:55%;">
<p><br> <img data-src="07-pics/join-outer-left.png" style="width:100.0%"> <br></p>
</div></div>
<p><br></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="fu">left_join</span>(x, y, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section>
<section id="right_join" class="slide level2 center">
<h2>right_join()</h2>
<p>Keeps all obse. in the right table (y), even if there is not a match in the left table (x).</p>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="07-pics/join-setup.png" style="width:90.0%"></p>
</div><div class="column" style="width:55%;">
<p><br> <img data-src="07-pics/join-outer-right.png" style="width:100.0%"> <br></p>
</div></div>
<p><br></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a><span class="fu">right_join</span>(x, y, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
<!-- same thing as left join but reversing the order of the data frame or table
typically right join is utilized less because by convention we think at the left or x table as the primary  data for these kind of operations 
-->
</section>
<section id="full_join" class="slide level2 center">
<h2>full_join()</h2>
<p>Keeps all obs., matches and non-matches (e.g., more missing values).</p>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="07-pics/join-setup.png" style="width:90.0%"></p>
</div><div class="column" style="width:55%;">
<p><br> <img data-src="07-pics/join-outer-full.png" style="width:100.0%"> <br></p>
</div></div>
<p><br></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a><span class="fu">full_join</span>(x, y, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section>
<section id="venn-diagram" class="slide level2 center">
<h2>Venn Diagram</h2>

<img data-src="07-pics/join-venn.png" style="width:60.0%" class="r-stretch"></section>
<section id="filtering-joins-1" class="slide level2 center">
<h2>Filtering joins</h2>
<p>Other than mutating joins, <code>dplyr</code> has filtering joins;</p>
<ul>
<li><strong>semi_join</strong>: keeps all observations in x that have a match in y</li>
<li><strong>anti_join</strong> drops all observations in x that have a match in y</li>
</ul>
<p>Essentially these function use information from the second data frame (y) to filter observations from the first data frame (x).</p>
</section>
<section id="semi_join" class="slide level2 center">
<h2>semi_join()</h2>
<p>Keeps all obs. in x that have a match in y. Only keeps columns from the first table you pass in the code (x).</p>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="07-pics/join-setup.png" style="width:90.0%"></p>
</div><div class="column" style="width:55%;">
<p><br> <br> <img data-src="07-pics/join-semi.png" style="width:100.0%"> <br> <br></p>
</div></div>
<p><br></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a><span class="fu">semi_join</span>(x, y, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section>
<section id="anti_join" class="slide level2 center">
<h2>anti_join()</h2>
<p>Drops all obs. in x that have a match in y. Only keeps columns from the first table you pass in the code (x).</p>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="07-pics/join-setup.png" style="width:90.0%"></p>
</div><div class="column" style="width:55%;">
<p><br> <br> <img data-src="07-pics/join-anti.png" style="width:100.0%"> <br> <br></p>
</div></div>
<p><br></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a><span class="fu">anti_join</span>(x, y, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br></p>
</section>
<section id="practice-working-with-relational-data-with-dplyr" class="slide level2 center">
<h2>💻 Practice working with relational data with dplyr</h2>
<p>Download today’s in-class materials from the website (<code>relational-data.Rmd</code>)</p>
</section>
<section id="recap-what-we-learned-today" class="slide level2 center">
<h2>Recap: What We Learned Today</h2>
<ul>
<li>How to rename variables using <code>rename()</code></li>
<li>How to recode values inside a variable using <code>recode()</code> and <code>case_when()</code></li>
<li>The difference between syntactic and non-syntactic variable names, and how to handle them</li>
<li>How to detect, ignore, or drop missing</li>
<li>How to import data with <code>read_csv</code> and export data using <code>write_csv</code></li>
<li>How to work with relational data using <code>dplyr</code></li>
</ul>
</section>
<section id="to-print-these-slides-as-pdf" class="slide level2 center">
<h2>To print these slides as pdf</h2>
<p>Click on the icon bottom-right corner &gt; Tools &gt; PDF Export Mode &gt; Print as a Pdf</p>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>