<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Final Project – css-website</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-dfb324f25d9b1687192fa8be62ac8f9c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../style/styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Computing for the Social Sciences</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../lectures/index.html"> 
<span class="menu-text">Lectures</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../hw/index.html"> 
<span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../setup/index.html"> 
<span class="menu-text">Software Setup</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#accessing-and-cloning-your-project-repository" id="toc-accessing-and-cloning-your-project-repository" class="nav-link" data-scroll-target="#accessing-and-cloning-your-project-repository">Accessing and Cloning Your <code>project</code> Repository</a></li>
  <li><a href="#general-homework-workflow" id="toc-general-homework-workflow" class="nav-link" data-scroll-target="#general-homework-workflow">General Homework Workflow</a></li>
  <li><a href="#assignment-description" id="toc-assignment-description" class="nav-link" data-scroll-target="#assignment-description">Assignment Description</a>
  <ul class="collapse">
  <li><a href="#assigment-goals" id="toc-assigment-goals" class="nav-link" data-scroll-target="#assigment-goals">1. Assigment Goals</a></li>
  <li><a href="#report-instructions" id="toc-report-instructions" class="nav-link" data-scroll-target="#report-instructions">2. Report Instructions</a></li>
  <li><a href="#code-instructions" id="toc-code-instructions" class="nav-link" data-scroll-target="#code-instructions">3. Code Instructions</a></li>
  <li><a href="#repository-and-readme.md-instructions" id="toc-repository-and-readme.md-instructions" class="nav-link" data-scroll-target="#repository-and-readme.md-instructions">4. Repository and <code>README.md</code> Instructions</a></li>
  </ul></li>
  <li><a href="#faqs" id="toc-faqs" class="nav-link" data-scroll-target="#faqs">FAQs</a>
  <ul class="collapse">
  <li><a href="#how-do-i-know-if-i-have-done-enough" id="toc-how-do-i-know-if-i-have-done-enough" class="nav-link" data-scroll-target="#how-do-i-know-if-i-have-done-enough">How do I know if I have “done enough”?</a></li>
  <li><a href="#what-data-should-i-use" id="toc-what-data-should-i-use" class="nav-link" data-scroll-target="#what-data-should-i-use">What data should I use?</a></li>
  <li><a href="#i-cant-think-of-anything-to-analyze" id="toc-i-cant-think-of-anything-to-analyze" class="nav-link" data-scroll-target="#i-cant-think-of-anything-to-analyze">I can’t think of anything to analyze!</a></li>
  <li><a href="#what-if-my-data-file-is-too-large" id="toc-what-if-my-data-file-is-too-large" class="nav-link" data-scroll-target="#what-if-my-data-file-is-too-large">What if my data file is too large?</a></li>
  <li><a href="#i-want-to-scrape-data" id="toc-i-want-to-scrape-data" class="nav-link" data-scroll-target="#i-want-to-scrape-data">I want to scrape data</a></li>
  </ul></li>
  <li><a href="#submit-the-assignment" id="toc-submit-the-assignment" class="nav-link" data-scroll-target="#submit-the-assignment">Submit the Assignment</a></li>
  <li><a href="#assessment" id="toc-assessment" class="nav-link" data-scroll-target="#assessment">Assessment</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final Project</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="overview" class="level1">
<h1>Overview</h1>
<p><strong>Due: Sunday, December 07 by 11:59 PM (Chicago Time)</strong></p>
</section>
<section id="accessing-and-cloning-your-project-repository" class="level1">
<h1>Accessing and Cloning Your <code>project</code> Repository</h1>
<p><strong>Accessing the repo:</strong></p>
<ol type="1">
<li><p>Go at <a href="https://classroom.github.com/a/G7TF9tmM">this link</a> to accept the invitation and create your private <code>project</code> repository on GitHub. Your repository will be named <code>project-&lt;USERNAME&gt;</code> and will be ready within a few seconds.</p></li>
<li><p>Once the repository has been created, click the link provided to access it.</p></li>
</ol>
<p><strong>Cloning the repo into your Workbench:</strong></p>
<ol type="1">
<li><p>Log into <em>Workbench</em> and start a new project:<br>
<em>File &gt; New Project &gt; Version Control &gt; Git</em></p></li>
<li><p>In the <em>Repository URL</em> field:</p>
<ul>
<li>Paste the URL of your GitHub repository. To find the URL, go to your <code>project</code> repo on GitHub, click the green Code button, and copy the SSH or HTTPS link (use the method you configured during setup: Workbench users must select SSH).</li>
<li>The project name should auto-fill. If not, type <code>project-&lt;USERNAME&gt;</code> manually.</li>
</ul></li>
<li><p>Choose where to save the project directory locally. <em>Tip:</em> Avoid moving folders after cloning them.</p></li>
<li><p>Check the box <em>“Open in new session”</em> (recommended for keeping projects separate and organized)</p></li>
<li><p>Click <em>Create Project</em>. This will:</p>
<ul>
<li>Create a new folder on your machine<br>
</li>
<li>Initialize a Git repository linked to GitHub<br>
</li>
<li>Open an RStudio Project in a new session</li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The repo you clone for the final project is intentionally empty: you will need to add your own data and code, and push them. See the instructions below for what to submit. Remember to include the knitted <code>.md</code> file(s)!.</p>
</div>
</div>
</section>
<section id="general-homework-workflow" class="level1">
<h1>General Homework Workflow</h1>
<p>See <a href="../hw/hw01.html">Homework 1</a> for details. The workflow is the same for all assignments (e.g., accept the repo, edit the files, save, then Pull – Stage – Commit – Push).</p>
</section>
<section id="assignment-description" class="level1">
<h1>Assignment Description</h1>
<section id="assigment-goals" class="level3">
<h3 class="anchored" data-anchor-id="assigment-goals">1. Assigment Goals</h3>
<p>In this final assignment, you’ll apply the skills learned in the course to a research question of your choice. <strong>Your task is to find data (through scraping or downloading or other sources), ask a research question, and answer it descriptively using data and code.</strong> Your main deliverable is a report with your code, graphs/tables, and interpretation</p>
<p>The sections below walk you through the details of each part of the assignment.</p>
</section>
<section id="report-instructions" class="level3">
<h3 class="anchored" data-anchor-id="report-instructions">2. Report Instructions</h3>
<section id="format-and-target" class="level4">
<h4 class="anchored" data-anchor-id="format-and-target">Format and Target</h4>
<ul>
<li><strong>Format:</strong> the report must be written using a <code>.Rmd</code> file, and knitted to<code>.md</code> and to <code>.pdf</code></li>
<li><strong>The report must include:</strong>
<ul>
<li>Written text</li>
<li>Code chunks</li>
<li>Code outputs (tables, plots, descriptive stats)</li>
<li>Not all code you write is required to go in your report: you may place extra code in a separate R script or Rmd. If you do so, mention this in your <code>README.md</code>.</li>
</ul></li>
<li><strong>Audience:</strong> Write your report as if you were preparing a polished analysis for either an academic audience or a professional industry setting.</li>
<li><strong>Length:</strong> Aim for <em>700–750 words</em> (minimum 700, maximum 1000).</li>
<li><strong>Use of R Markdown Syntax:</strong> Use clear headings and subheadings and include a table of contents. Include some of the advanced R Markdown tools covered in Lecture 17.</li>
</ul>
</section>
<section id="required-sections" class="level4">
<h4 class="anchored" data-anchor-id="required-sections">Required Sections</h4>
<p>Specifically, your report should include the following elements:</p>
<ul>
<li><strong>Project description</strong>
<ul>
<li>Start by explaining what your project is about, its goals, and why it matters.</li>
<li>Describe the dataset (number of observations, time period, key variables, data source). Store the data in your repo. If it is larger than 100 MB, see below.</li>
<li>State one or more questions, ideally with social science relevance, and your hypothesis or describe what you expect to find and why.</li>
</ul></li>
<li><strong>Descriptive statistics and plots</strong>
<ul>
<li>Include tables (e.g.&nbsp;<code>kable()</code>) and descriptive statistics (counts, percentages, contingency tables, etc.).</li>
<li>Include 4 or 5 well-designed plots with clear titles, labels, scales, etc. Use different types of plots (do not use the same plot more than once) and ensure each one matches the underlying variable types.</li>
<li>Transform or prepare variables for your plots and analyses when needed (e.g., aggregating, recoding, creating new variables).</li>
<li>We want to hear your explanation and interpretation of the analyses: describe each graph, highlight patterns, discuss possible relationships between variables, note limitations, and suggest hypotheses or directions for future research.</li>
</ul></li>
<li><strong>Modeling is optional</strong>
<ul>
<li>You are not expected or required to include statistical models since we did not cover them in this course. Excellent projects can rely entirely on descriptive statistics and the types of plots used in HW2 and HW3.</li>
<li>If you choose to add models (e.g., regression, ANOVA), make sure to use them appropriately: check assumptions, interpret coefficients, and ensure the method fits your variables and research question.</li>
</ul></li>
</ul>
</section>
</section>
<section id="code-instructions" class="level3">
<h3 class="anchored" data-anchor-id="code-instructions">3. Code Instructions</h3>
<p>This course has a strong coding component, so the quality and organization of your code are an important part of the project.</p>
<ul>
<li><p><strong>Library Loading and Data Import</strong><br>
Load all required libraries and import your data once at the top of your Rmd. Do not reload libraries elsewhere. If you are scraping data, place your scraper in a separate R or Rmd script (see Code Organization below).</p></li>
<li><p><strong>Data Cleaning, Wrangling, and Tidying</strong><br>
Include code needed to prepare your data (renaming, recoding, aggregating, reshaping, tidying data, joining data etc.). The amount of cleaning will depend on your project. If your code for data prep is extensive, consider placing it in a separate script (see below)</p></li>
<li><p><strong>Data Analysis and Plots</strong><br>
Include code for descriptive statistics (tables, summaries, counts, percentages, contingency tables, etc.) Include code for 4–5 well-designed plots. Use a variety of plot types and match each to the variable types. If your dataset requires little cleaning, we expect more complex and refined visualizations</p></li>
<li><p><strong>Programming Techniques</strong><br>
Include at least one user-defined function AND either a loop (or a map/across/apply alternative) OR a conditional statement. If these don’t naturally fit your project, check in with us and we’ll help you find the best approach.</p></li>
<li><p><strong>Code Organization</strong><br>
Include only relevant output (e.g., show the head of your dataset, not the full dataset) and follow coding practices from class: clean style, reproducible workflow, and Markdown formatting. Prefer tidyverse functions where applicable (e.g., use <code>read_csv()</code> instead of <code>read.csv()</code>).<br>
Extensive cleaning steps or extra plots can go in a separate script or Rmd. If you do so, in the main report, load the cleaned data and include only the required plots. Store all code in your repository to ensure reproducibility. Note the location of any additional code in your <code>README.md</code>.</p></li>
</ul>
</section>
<section id="repository-and-readme.md-instructions" class="level3">
<h3 class="anchored" data-anchor-id="repository-and-readme.md-instructions">4. Repository and <code>README.md</code> Instructions</h3>
<p>Your repository must include a <code>README.md</code> with the following information:</p>
<ul>
<li><p><strong>Purpose of the repository:</strong> A bullet point explanation of what the project is about (e.g., topic, data source, sample size).</p></li>
<li><p><strong>List of files:</strong> A list of all R scripts and <code>.Rmd</code> files in the repo, each with a one-sentence description.</p></li>
<li><p><strong>Required packages:</strong> Any non-basic packages needed to run your code (no need to list <code>tidyverse</code> or <code>rmarkdown</code>).</p></li>
<li><p><strong>Additional information:</strong> Anything else a user needs to understand or replicate your work.</p></li>
</ul>
</section>
</section>
<section id="faqs" class="level1">
<h1>FAQs</h1>
<section id="how-do-i-know-if-i-have-done-enough" class="level3">
<h3 class="anchored" data-anchor-id="how-do-i-know-if-i-have-done-enough">How do I know if I have “done enough”?</h3>
<ul>
<li>First, make sure you’ve met all requirements for the report, code, and <code>README.md</code>.</li>
<li>As a rough benchmark, this assignment should take about as much time as an average previous one. It’s worth 20 points instead of 15, since finding data and developing your own question typically require a bit more work. Please take this only as a guideline, actual time will vary by student, project, and working style.</li>
<li>Aim to review what you’ve learned and push a bit beyond your comfort zone. If you’re unsure whether your plan is sufficient, check in with us.</li>
<li>This assignment should reflect your own work. You may seek advice by humans or robots, but your code must be written by you, understandable to you, and aligned with our AI policy.</li>
</ul>
</section>
<section id="what-data-should-i-use" class="level3">
<h3 class="anchored" data-anchor-id="what-data-should-i-use">What data should I use?</h3>
<p>We encourage you to use social science data; other types of data can work too but check with us first. What matters most is applying the skills you learned to a topic that interests you: the best projects are the ones you are genuinely excited to work on.</p>
</section>
<section id="i-cant-think-of-anything-to-analyze" class="level3">
<h3 class="anchored" data-anchor-id="i-cant-think-of-anything-to-analyze">I can’t think of anything to analyze!</h3>
<p>You may use any dataset from class <strong>not used in previous homework</strong> and not tied to teaching examples (e.g., penguins, cars, iris datasets are not appropriate). Some options to consider:</p>
<ul>
<li><code>gapminder</code> (<code>library(gapminder)</code>)</li>
<li><code>gun_deaths</code> (<code>library(rcis)</code>) or the raw data from FiveThirtyEight (similar topic but this is different dataset than HW2)</li>
<li><code>scorecard</code> (<code>library(rcis)</code>) or use the <a href="https://github.com/btskinner/rscorecard"><code>rscorecard</code></a> package to download your own subset</li>
<li>Browse the <strong>Data Is Plural</strong> dataset archive<br>
<a href="https://docs.google.com/spreadsheets/d/1wZhPLMCHKJvwOkP4juclhjFgqIY8fQFMemwKL2c64vk/edit#gid=0" class="uri">https://docs.google.com/spreadsheets/d/1wZhPLMCHKJvwOkP4juclhjFgqIY8fQFMemwKL2c64vk/edit#gid=0</a></li>
<li>Explore <strong>#TidyTuesday</strong>, which publishes weekly datasets and maintains a full archive:<br>
<a href="https://github.com/rfordatascience/tidytuesday" class="uri">https://github.com/rfordatascience/tidytuesday</a></li>
</ul>
</section>
<section id="what-if-my-data-file-is-too-large" class="level3">
<h3 class="anchored" data-anchor-id="what-if-my-data-file-is-too-large">What if my data file is too large?</h3>
<p>GitHub does not allow files larger than 100MB. If you try to push one, you’ll get an error and may have to remove the file from your Git history, which is a hassle. Thus:</p>
<ul>
<li>If your data is well under 100MB, include it in your repo.<br>
</li>
<li>If it is close to or above 100MB, <strong>do not</strong> include it in your repo. Instead, store it outside GitHub (e.g., Google Drive) and include a link to it in your <code>README.md</code>.</li>
</ul>
</section>
<section id="i-want-to-scrape-data" class="level3">
<h3 class="anchored" data-anchor-id="i-want-to-scrape-data">I want to scrape data</h3>
<p>You may use already-collected data or collect your own. If you want to scrape data but are unsure whether a website is appropriate, feel free to check with the instructor. Here are some guidelines:</p>
<ul>
<li><strong>What to Scrape:</strong>
<ul>
<li>If you plan to collect data through web-scraping, you can scrape any publicly available webpage that interests you. If you’re unsure where to start, past students have had success with: Wikipedia, University websites, Government sites, Examples mentioned in readings. If you build on in-class code, readings, tutorials, or AI-generated starter code, your work must go beyond simple edits.</li>
<li>You can use an API (vs.&nbsp;direct scraping), check in with the instructor if unsure.</li>
</ul></li>
<li><strong>What Not to Scrape:</strong>
<ul>
<li>No private or restricted data: Do not scrape anything behind a login, password, or user account.<br>
</li>
<li>No social media sites: as they typically require log-ins.<br>
</li>
<li>No dynamic Javascript websites: that load content via scrolling or pop-ups—these require advanced techniques we do not cover.</li>
</ul></li>
</ul>
</section>
</section>
<section id="submit-the-assignment" class="level1">
<h1>Submit the Assignment</h1>
<p>To submit your assignment on Canvas, follow these steps:</p>
<ol type="1">
<li><p>Before the deadline, push the final version of your work to your GitHub repository. <em>Tip:</em> don’t wait until the end to make your first commit—commit, stage, and push your work regularly as you go.</p>
<p>Your GitHub repository should include (make sure to stage-commit-push all these files):</p>
<ul>
<li>everything you have done to collect the data and produce your analyses, e.g., R Markdown files or R scripts, graphs, data (unless they are too large, see above for details)</li>
<li>your report should be a <code>Rmd</code> file. Knit this file in two ways: as <code>md</code>, and as <code>pdf</code>. Submit all three of them ( <code>Rmd</code>, <code>md</code>, <code>pdf</code>)</li>
<li>the folder that contains all the graphs that you generated in your <code>.Rmd</code></li>
</ul></li>
<li><p>When you’re ready to submit:</p>
<ul>
<li>Copy the URL of your GitHub repository. It will look something like: <code>https://github.com/css-fall25/project-yourusername</code></li>
<li>Submit that URL on Canvas. Do not upload any files to Canvas. We only need the repository link.</li>
</ul></li>
</ol>
</section>
<section id="assessment" class="level1">
<h1>Assessment</h1>
<p>We’ll post the final project rubric here shortly. For more, see the <em>Assessment</em> section of the Syllabus.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>